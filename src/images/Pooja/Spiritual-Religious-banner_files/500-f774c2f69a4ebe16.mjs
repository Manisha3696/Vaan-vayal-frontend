"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[500,30277,27684],{485701:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={fragment:{argumentDefinitions:r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:l=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheckQuery_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},o],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c881f56582aebd78b7f3f625abfe959aa6d034bcd97439d6b4224d46c1c5f8cc",metadata:{},name:"AlreadyPinnedCheckQuery",operationKind:"query",text:null}};i.hash="0b5f077c08e31de36594b6918e128d12";let n=i;var r,l,s,o,d=i.default||i;if("query"===d.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(d);else{let e=[d.params.name,d.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=d}},144434:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="6bb1a587f71f85424aa51845831862d4";let n=i},807089:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheck_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="3caf9424c2af74d2b11a6ea682b57d1b";let n=i},823559:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],type:"Pin",abstractKey:null};i.hash="18c3db3fbed169f50cffd214f66ddd8e";let n=i},778194:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};i.hash="f12c153dafdb70970e02775ea0db67c2";let n=i},375283:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="76215b7b40cb02e76b77e58c8765d0d1";let n=i},158727:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardsPane_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPicker_pin"}],type:"Pin",abstractKey:null};i.hash="56f620fbd63abf8f7cb32f9a378198f8";let n=i},841582:(e,t,a)=>{var i,n;a.r(t),a.d(t,{default:()=>l});let r=(n=[i={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CallToAction_advisoryAction",selections:[{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},i],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:n,storageKey:null}],type:"AdvisoryAction",abstractKey:null});r.hash="6ddea2ecd3dff2e1001c1e4d037cc858";let l=r},360337:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DefaultNotice_advisoryNotice",selections:[{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"textTags",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"HyperlinkFormatText_textTag"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CallToAction_advisoryAction"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"AdvisoryNotice",abstractKey:null};i.hash="5879c4710b107f258f42156bf3e47e37";let n=i},797510:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"HyperlinkFormatText_textTag",selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],type:"TextTag",abstractKey:null};i.hash="4970946a36017d9ad0c751fd70cc512c";let n=i},465899:(e,t,a)=>{var i,n,r;a.r(t),a.d(t,{default:()=>s});let l=(n=[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],r=[i],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LegoNotice_advisoryNotice",selections:[{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:[i,{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"textTags",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"HyperlinkFormatText_textTag"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryFooter",kind:"LinkedField",name:"footer",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:r,storageKey:null}],storageKey:null}],type:"AdvisoryNotice",abstractKey:null});l.hash="53d7eec34666980eda011429185b5b10";let s=l},997784:(e,t,a)=>{var i,n,r,l,s;a.r(t),a.d(t,{default:()=>d});let o=(i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s=[{alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"localPinId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sectionId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinBetterSave_pin",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},n,i,r,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[i],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[n,i,r],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"PinSaveRequestRepinWithSectionSuggestions_pin"},{args:null,kind:"FragmentSpread",name:"PinToBoard_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedInfo",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedCutout",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"selectedItem",plural:!1,selections:s,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null});o.hash="00592a87c0eef346f4bdfb1d6ca06595";let d=o},44377:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinBetterSave_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinSaveRequestRepinWithSectionSuggestions_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"PinToBoard_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};i.hash="2fd12704316ce3077575f9a0d9e31e84";let n=i},320857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheck_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="d928a4e793c8e81567357b1faa71d2e3";let n=i},165935:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};i.hash="1a4583782792fbfe92015cb2dbe50f70";let n=i},146139:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequestRepinWithSectionSuggestions_pin",selections:[{args:null,kind:"FragmentSpread",name:"PinSaveRequest_pin"}],type:"Pin",abstractKey:null};i.hash="03aa6b9cad1d5fb9b12a7c896ccdaffd";let n=i},649014:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequestRepinWithSectionSuggestions_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinSaveRequest_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};i.hash="6bd1eb83cfe5391288164b17cc5d85b7";let n=i},486295:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>r});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_pin",selections:[{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null}]}],type:"Pin",abstractKey:null};n.hash="bfa270bf437ef1e9195cafe07b0b3631";let r=n},850951:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"ShuffleAsset",abstractKey:null};i.hash="58c24e25a76e7a1c4533f3b07f490517";let n=i},113490:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardsPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_pin"}],type:"Pin",abstractKey:null};i.hash="616d5be8fea6092b51f23b548a1a5dca";let n=i},905018:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinPane_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};i.hash="4435ca5e135b834ea8a6425f68eb2f7a";let n=i},599986:(e,t,a)=>{var i,n;a.r(t),a.d(t,{default:()=>l});let r={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"boardId"}],kind:"Fragment",metadata:null,name:"collab_AcceptInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_AcceptInvite_Mutation",selections:n},params:{id:"781c41132fefa007ebde7bcd8c49840ce1768ed6f6781fd72e3904bd35fb576f",metadata:{},name:"collab_AcceptInvite_Mutation",operationKind:"mutation",text:null}};r.hash="7005ce437a6a6ff33741ab44aa02cf61";let l=r},693728:(e,t,a)=>{var i,n;a.r(t),a.d(t,{default:()=>l});let r={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_ApproveInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_ApproveInvite_Mutation",selections:n},params:{id:"472a584df4a467181ed32ec33d235ef2f2e6d53fdb4c7a43d11156b6d51dcd50",metadata:{},name:"collab_ApproveInvite_Mutation",operationKind:"mutation",text:null}};r.hash="40ae8061007ba5f53a4570e43e4ca864";let l=r},791701:(e,t,a)=>{var i,n,r,l;a.r(t),a.d(t,{default:()=>o});let s={fragment:{argumentDefinitions:[i={defaultValue:null,kind:"LocalArgument",name:"ban"},n={defaultValue:null,kind:"LocalArgument",name:"boardId"},r={defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:l=[{alias:null,args:[{fields:[{kind:"Variable",name:"ban",variableName:"ban"},{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,r,i],kind:"Operation",name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:l},params:{id:"ff3059743c1d13d4f1c2ef07e10d2b29925c7b330db4103e55e9e65c380c0ce5",metadata:{},name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",operationKind:"mutation",text:null}};s.hash="c62e5df78917dd238b70f366f358d487";let o=s},926331:(e,t,a)=>{var i,n,r,l,s,o,d,c;a.r(t),a.d(t,{default:()=>h});let u={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"}],kind:"Fragment",metadata:null,name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:n=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[l={alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null}],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s,o,c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},c],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d],storageKey:null}]},params:{id:"83dd1206102cffdd460f8c072df0ca515d27c8fcf3798423f1657afabdf467ac",metadata:{},name:"collab_RemoveBoardCollaborators_Mutation",operationKind:"mutation",text:null}};u.hash="2c3e1508650962adfff1171e950fa419";let h=u},79558:(e,t,a)=>{var i,n,r,l,s,o,d,c,u,h;a.r(t),a.d(t,{default:()=>_});let p=(i=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"message"}],n=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s=[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},u={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"},h=[l,c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:s,storageKey:null},o,d,c,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:s,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},u],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:h,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:h,storageKey:null},o,d,c,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:h,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},u],storageKey:null}]},params:{id:"ff45f353c3246c417487b54a02f0669dbc6c45761df9567395537bf1f7875a9f",metadata:{},name:"collab_RequestToJoin_Mutation",operationKind:"mutation",text:null}});p.hash="9aa22a7713214239538142ad2c957cc3";let _=p},825668:(e,t,a)=>{var i,n;a.r(t),a.d(t,{default:()=>l});let r={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"emails"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_emails_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"emails",variableName:"emails"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutationv2",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"collab_emails_Mutation",selections:n},params:{id:"b71dbcb22ec2462fa0cde080403e4f9001df6f822511fd94b0fb3eae0c6b3fd4",metadata:{},name:"collab_emails_Mutation",operationKind:"mutation",text:null}};r.hash="de392a939a95d05f7ee889fe77a9e52d";let l=r},286383:(e,t,a)=>{var i,n,r,l;a.r(t),a.d(t,{default:()=>o});let s={fragment:{argumentDefinitions:[i={defaultValue:null,kind:"LocalArgument",name:"boardId"},n={defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"},r={defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_users_Mutation",selections:l=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,i,r],kind:"Operation",name:"collab_users_Mutation",selections:l},params:{id:"42ceaa3423a096a27613e5738f83aaadcee449c55d4dd03624d2f08a6b6dca04",metadata:{},name:"collab_users_Mutation",operationKind:"mutation",text:null}};s.hash="850c5de9834cac0edfdd5652a78bffbf";let o=s},970449:(e,t,a)=>{a.d(t,{Z:()=>i});let i=e=>({isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e,isPlanningHub:12===e})},843220:(e,t,a)=>{a.d(t,{Z:()=>r});let i=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},n=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};n.prototype.set=function(e,t){let a=this._uidToData[e];a||(a=new i(e,t),this._uidToData[e]=a,this._numItems+=1),this._moveToFront(a),this._numItems>this._maxNumItems&&this._evict()},n.prototype.get=function(e){let t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},n.prototype.remove=function(e){let t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},n.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},n.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};let r=n},236890:(e,t,a)=>{a.d(t,{Cd:()=>m,G:()=>S,IA:()=>j,M5:()=>k,ML:()=>u,Oh:()=>v,Pe:()=>c,Tv:()=>_,Uy:()=>h,Xf:()=>y,cO:()=>f,ew:()=>p,nN:()=>b,p9:()=>x,yo:()=>g});var i=a(883366),n=a(112274),r=a(642298),l=a(629268),s=a(51340),o=a(154010),d=a(992114);let c=e=>e._('Make sure this age is accurate. Your birthdate is required for personalization, community safety and as part of our terms of service. For business accounts, use your own birthdate.', 'birthdateConfirmation.HelperText', 'Helper text notifying users to input their own birthday'),u=e=>e._('Use your own birthday, even if this a business account', 'birthdateConfirmation.HelperText.ownBirthday', 'Helper text notifying users to input their own birthday'),h=e=>e._('Oops! Please use a valid age to sign up.', 'existingUser.birthdaycollection.error.overage', 'Error message shown when overage (age over 120) user tries to register'),p=(e,t)=>{let{locale:a}=t.getLocaleData(),i=(0,l.Z)(e),n=i.toLocaleString(a,{month:"long"}),r=i.getDate().toString(),o=i.getFullYear();return(0,s.nk)(t._('Is {{month}} {{day}}, {{year}} your birthday?', 'birthdateConfirmation.heading', 'Header for the confirmation model verifying the age for the birthdate that the user inputted, month: month inputted into the fields, day: day inputted into the fields, year: year inputted into the fields'),{month:n,day:r,year:o})},_=(e,t,a,i,n=!1)=>{let r=(0,s.nk)(n?e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}}.', 'settings birthday error message', 'label for settings birthday error message. dayError: Incorrect day. monthError: Incorrect month. yearError: Incorrect year.'):e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}} to sign up.', 'signup birthday error message', 'label for sign up birthday error message'),{dayError:t?e._('day', 'dayError keyword placeholder', 'label for dayError keyword place holder'):"",monthError:a?e._('month', 'monthError keyword placeholder', 'label for monthError keyword place holder'):"",yearError:i?e._('year', 'monthError keyword placeholder', 'label for monthError keyword place holder'):""}).filter(e=>0!==e.length);return 3===r.length?r.join(""):r[0]+r.slice(1,-1).join(", ")+r[r.length-1]},g=({country:e})=>e&&e in o.T3?o.T3[e]:o.Ur,m=(e,t)=>{let a=new Date,i=new Date(a.getFullYear()-t,a.getMonth(),a.getDate());return new Date(e)<=i},f=new Date().getFullYear(),b=new Date().getFullYear()-120,y=12,v=1,x=1,S=31,P="yyyy-MM-dd",k=e=>{let t=new Date,a=new Date(b,t.getMonth(),t.getDate()),i=m(e,5),n=new Date(e)>a;return i&&n};function j(e){let t=(0,i.Z)(e,P,new Date);if((0,n.Z)(t))return e;let a=new Date(e);try{return(0,r.Z)(a,P)}catch{return(0,d.nP)("webapp.birthday_validation_error",{sampleRate:1,tags:{birthdate:e}}),e}}},629268:(e,t,a)=>{a.d(t,{Z:()=>i});let i=e=>{let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}},847989:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(667294),n=a(644244);function r({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:a,resourceName:r,resourceOptions:l,value:s}){let o=(0,n.Z)({allowSearchOnMount:e,resourceName:r,resourceOptions:l,value:s});return(0,i.useEffect)(()=>{o?.length&&a(o)},[o]),t||null}},178592:(e,t,a)=>{a.d(t,{Z:()=>i});let i=2},644244:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(667294),n=a(843220),r=a(751800);function l({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:a={},value:l}){let s=(0,i.useRef)(!1),o=(0,i.useRef)({}),[d,c]=(0,i.useState)([]),u=function({resourceName:e,resourceOptions:t}){let a=(0,r.vL)(),l=(0,i.useRef)(void 0);return l.current||(l.current=function({resourceCreator:e,resourceName:t,resourceOptions:a}){let i=e(t,{...a,count:"count"in a?a.count:5}),r=new n.Z,l=()=>{i.abort()},s=async(e,t)=>{if(i.isCalling()){let a=i.options?.term,n=i.options?.pin_scope;if(e===a&&t===n)return;l()}let{bookmarks:a,...n}=i.options||{};i.options={...n,term:e,pin_scope:t};let{data:s}=(await i.callGet({showError:!1})).resource_response,o=s?.items,d=s?.hint||{};return r.set(`${t}-${e}`,{hint:d,items:o}),{term:e,items:o,hint:d}};return async function(e,t){let a=r.get(`${t}-${e}`);if(a){let{items:t}=a;if(t&&t.length){l();let{hint:i}=a;return{hint:i,items:t,term:e}}}return e.length>=0?s(e,t):{hint:{},items:[],term:e}}}({resourceCreator:a,resourceName:e,resourceOptions:t})),l.current}({resourceName:t,resourceOptions:a}),h=a.pin_scope||"pins",p=`${h}-${l}`;return(0,i.useEffect)(()=>{(async()=>{if(null!=l&&""!==l&&(e||s.current))if(p in o.current)c(o.current[p]);else try{let e=await u(l,h);if(e){let{items:t}=e;o.current[p]=t,c(t)}}catch(e){if("Resource call aborted"===e)return;throw e}s.current||(s.current=!0)})()},[l,h,p]),d}},902522:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(857147),n=a(655057);function r(e){if(!e)return"";let{directory:t,queryKey:a}=(0,n.Z)((0,i.Gw)(e,["request_params"]));return t+"?"+Object.keys(a).sort().map(e=>`${e}=${a[e]}`).join("&")}},948155:(e,t,a)=>{a.d(t,{Ht:()=>l,Tb:()=>r});var i=a(902522),n=a(166543);function r({appliedProductFilters:e,appliedUnifiedFilters:t,autoCorrectionDisabled:a,filters:i,journeyDepth:n,query:r,rs:l,scope:s,selectedOneBarModules:o,selectedPinImgSig:d,sourceId:c,sourceModuleId:u,topPinIds:h,user:p}){let _=[e,i,n,r,l,s,o,d,c,u,t,h,p].map(e=>e??"").join(":");return a?"auto-correction-disabled:"+_:_}function l(e){let{appliedProductFilters:t,appliedUnifiedFilters:a,autoCorrectionDisabled:r,bubbleId:l,domains:s,filters:o,guidedSearchQuery:d,journeyDepth:c,pageSize:u,priceMax:h,priceMin:p,query:_,requestParams:g,rs:m,scope:f,selectedOneBarModules:b,selectedPinImgSig:y,seoDrawerEnabled:v,sourceId:x,sourceModuleId:S,sourceUrl:P,topPinId:k,topPinIds:j,user:w}=e;return{name:"BaseSearchResource",options:function({appliedUnifiedFilters:e=null,appliedProductFilters:t=null,autoCorrectionDisabled:a=!1,bubbleId:r=null,domains:l=null,filters:s=null,journeyDepth:o=null,pageSize:d=null,priceMax:c=null,priceMin:u=null,query:h="",requestParams:p=null,rs:_=n.i.DIRECT_NAVIGATION,scope:g="pins",selectedOneBarModules:m=null,selectedPinImgSig:f=null,seoDrawerEnabled:b=!1,sourceId:y=null,sourceModuleId:v=null,sourceUrl:x=null,topPinId:S=null,topPinIds:P=null,user:k}){return{applied_unified_filters:e,appliedProductFilters:t,article:r,auto_correction_disabled:a,corpus:f?"personalize":null,customized_rerank_type:f?"manas_graph_sage_only_wand_rewrite":null,domains:l,filters:s,journey_depth:o,page_size:d,price_max:c,price_min:u,query_pin_sigs:f,query:h,redux_normalize_feed:!0,request_params:p,rs:_,scope:g,selected_one_bar_modules:m,seoDrawerEnabled:b,source_id:y,source_module_id:v,source_url:(0,i.Z)(x),top_pin_id:S,top_pin_ids:P,user:k}}({appliedProductFilters:t,appliedUnifiedFilters:a,autoCorrectionDisabled:!!r,bubbleId:l,domains:s,filters:o,guidedSearchQuery:d,journeyDepth:c,pageSize:u,priceMax:h,priceMin:p,query:_,requestParams:g,rs:m,scope:f,selectedOneBarModules:b,selectedPinImgSig:y,seoDrawerEnabled:v,sourceId:x,sourceModuleId:S,sourceUrl:P,topPinId:k,topPinIds:j,user:w})}}},448725:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(538645),n=a(438596);function r(){return function({deviceType:e,site:t}){switch(t){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"commerce-app-latest":case"pintergration":return 10;case"creators":case"create":return 11;case"newsroom":return 13;case"about":return 14;case"pinnacle-internal":return 17;default:return+("phone"===e||"tablet"===e)}}({deviceType:(0,i.ZP)(),site:(0,n.uo)()})}},403526:(e,t,a)=>{a.d(t,{Z:()=>n});let i=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,n=e=>i.test(e)},143759:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(667294);let n=null,r=!1,l=0,s=()=>{n&&clearTimeout(n),r=!0,n=setTimeout(()=>{r=!1},100)},o=()=>{let[e,t]=(0,i.useState)(!1),a=(0,i.useRef)(null);(0,i.useEffect)(()=>(0===l&&window.addEventListener("scroll",s),l+=1,()=>{a.current&&clearTimeout(a.current),(l-=1)||window.removeEventListener("scroll",s)}),[]);let n=e=>{a.current&&clearTimeout(a.current),a.current=e&&r?setTimeout(()=>n(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:(0,i.useRef)({onMouseOver:()=>n(!0),onMouseLeave:()=>n(!1)}).current}}},73082:(e,t,a)=>{a.d(t,{Z:()=>n});let i=/^(?:https?:\/\/)?([^\s\/?#."]+\.)+([^\s\/?#."]+)(\/[^\s?#]*)?(#[^\s]*)?(\?[^"]*)?$/;function n(e,t){return!!e&&i.test(e)&&(e.startsWith("http://")||e.startsWith("https://")||!!t?.protocolIsOptional)}},331935:(e,t,a)=>{a.d(t,{Bh:()=>_,C9:()=>k,CU:()=>d,ES:()=>j,FU:()=>B,GT:()=>c,Gy:()=>v,J_:()=>C,Jx:()=>f,Ks:()=>z,MZ:()=>x,Pg:()=>b,U2:()=>F,VC:()=>m,VG:()=>u,ZA:()=>h,Zt:()=>y,a3:()=>R,aH:()=>o,fS:()=>p,nw:()=>P,oR:()=>w,qA:()=>g,qp:()=>A,sG:()=>S,vd:()=>T,xk:()=>I});var i=a(236890),n=a(655057),r=a(73082);let l={January:31,February:29,March:31,April:30,May:31,June:30,July:31,August:31,September:30,October:31,November:30,December:31},s=e=>{let t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},a=String(e).split("");return a.forEach((e,i)=>{let n=t[e];n&&(a[i]=n)}),a.join("")};function o(e){return(t,a)=>{let i=[];t&&/\S/.test(t)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}let d=RegExp("(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*|^\"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*\")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$","i");function c(e){return(t,a)=>{t=t&&t.trim();let i=[];t.match(d)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function u(e){return(t,a)=>{t=t&&t.trim();let i=[];t.match(/^[^0-9].*$/)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function h(e){return(t,a)=>{let i=[];if(t){let a=parseInt(t,10);Number.isNaN(a)?i.push(e.invalidAgeString):(e.ageTooShortString&&a<10&&i.push(e.ageTooShortString),a<=0||a>120?i.push(e.invalidAgeString):e.checkUnderAgeWithString&&a<18&&i.push(e.checkUnderAgeWithString))}let n={errors:i,warnings:[]};return a&&a(n),n}}function p(e){return(t,a)=>{let i=[],[n,r]=t.split(" ");if(n)if(n.match(/^[0-9]+$/)){let t=parseInt(n,10);(Number.isNaN(t)||t>31||t>l[r])&&i.push(e.invaliddobDateString)}else i.push(e.invaliddobDateString);let s={errors:i,warnings:[]};return a&&a(s),s}}function _(e){return(t,a)=>{let i=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),n=[],r=!1!==e.checkLength&&i.length<7;t&&(!t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)||r)&&n.push(e.message);let l={errors:n,warnings:[]};return a&&a(l),l}}function g(e){return(t,a)=>{let i=[];"number"==typeof t||"string"==typeof t&&(t=s(t=t&&t.trim()))&&!t.match(/^\d+$/)&&i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function m(e){return(t,a)=>{let i=[];"number"==typeof t||"string"==typeof t&&(t=s(t=t&&t.trim()))&&!t.match(/^[\d\ -]+$/)&&i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function f({message:e}){return(t,a)=>{let i=[];t&&!(0,r.Z)(t,{protocolIsOptional:!0})&&i.push(e);let n={errors:i,warnings:[]};return a&&a(n),n}}function b(e){return(t,a)=>{let i={errors:t&&!/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t)?[e.message]:[],warnings:[]};return a&&a(i),i}}function y(e){return(t,a)=>{let i=[];if(t)try{let a=(0,n.Z)(t);a&&a.protocol&&("http"!==a.protocol||"localhost"===a.hostname)||i.push(e.message)}catch(t){i.push(e.message)}let r={errors:i,warnings:[]};return a&&a(r),r}}function v(e){return(t,a)=>{let i=e.should_trim||!1,n=[];i&&(t=t&&t.trim());let r=t.length;"min"in e&&e.min>0&&r<e.min?n.push(e.minErrorString):"max"in e&&e.max>0&&r>e.max&&n.push(e.maxErrorString);let l={errors:n,warnings:[]};return a&&a(l),l}}function x(e){return(t,a)=>{let i=!e.checkExclusion,{substrings:n}=e,r=[];(i&&!n.some(e=>t.includes(e))||!i&&n.some(e=>t.includes(e)))&&r.push(e.message);let l={errors:r,warnings:[]};return a&&a(l),l}}function S(e){return(t,a)=>{let i=e&&e.targetValue,n=[];t!==i&&n.push(e.message);let r={errors:n,warnings:[]};return a&&a(r),r}}function P(e){return(t,a)=>{let i=[];(t?parseFloat(t):0)<e.value&&i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function k(e){return(t,a)=>{let i=new Date(t),n=[];e.date instanceof Date&&i instanceof Date&&e.date<i&&n.push(e.message);let r={errors:n,warnings:[]};return a&&a(r),r}}function j(e){return(t,a)=>{let n=new Date(t),r=e.date instanceof Date&&n instanceof Date,l=[];(r&&e.date<n||!(0,i.M5)(t))&&l.push(e.message);let s={errors:l,warnings:[]};return a&&a(s),s}}function w(e){return(t,a)=>{let i=[];/^[\x20-\x7E]*$/.test(t)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function I(e){return(t,a)=>{let i=2;if(e.hasFractionalCents)i=3;else if(e.currencyCode){let{maximumFractionDigits:t}=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyCode}).resolvedOptions();i=t}let n=new RegExp(i?`^\\d*(\\.\\d{1,${i}})?$`:"^\\d*$"),r=[];t&&!t.match(n)&&(t=t&&t.trim(),r.push(e.message));let l={errors:r,warnings:[]};return a&&a(l),l}}function C(e){return(t,a)=>{t=t&&t.trim();let i=[],n=new Date(t);t&&!n.getTime()&&i.push(e.message);let r={errors:i,warnings:[]};return a&&a(r),r}}function A(e){return(t,a)=>{let i=t&&t.trim(),n=[];i&&!i.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&n.push(e.message);let r={errors:n,warnings:[]};return a&&a(r),r}}function T(e){return(t,a)=>{let i=[];e.pattern.test(t)||i.push(e.message);let n={errors:i,warnings:[]};return a&&a(n),n}}function B(e,t){return[].concat(...e.map(e=>e(t).errors))}async function z(e,t){return[].concat(...await Promise.all(e.map(async e=>{let a=e(t);return a instanceof Promise?(await a)(t).errors:a.errors})))}function R(e,t){let a="";return t.some(t=>{let i=t(e);return i.errors.length>0&&(a=i.errors[0],!0)}),a}async function F(e,t){let a="";for(let i of t){let t=i(e);if(t instanceof Promise){let i=(await t)(e);if(i.errors.length>0){a=i.errors[0];break}}else if(t.errors.length>0){a=t.errors[0];break}}return a}},152:(e,t,a)=>{a.d(t,{Z:()=>c,l:()=>d});var i=a(667294),n=a(970449),r=a(174646),l=a(448725),s=a(562759),o=a(827491);let d=(0,i.createContext)(void 0),c=function(){let{advertiser:e}=(0,r.B)(),t=function(){let{isSterlingSite:e}=(0,n.Z)((0,l.Z)());return(0,i.useContext)(d)??e}(),a=(0,o.Z)(),c=((0,s.W)()?.profiles||[]).find(t=>t?.id===e?.owner_user_id);return t&&c||a}},703717:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=a(667294),n=a(20256),r=a(233846),l=a(576118),s=a(197098),o=a(785893);function d(e){let t=(0,r.ZP)(),{clientTrackingParams:a,style:d,useLegoStyles:c=!1,usePersistentOneClickSaveStyles:u,wrappingIconStyle:h,shouldUseLegoStyles:p,carouselSlotCurrentIndex:_,component:g,onDelete:m,onSubmit:f,onToggleModal:b,pinId:y,surface:v}=e,[x,S]=(0,i.useState)(!1),{onClick:P,carouselSlotCurrentIndex:k}=(0,s.Z)({carouselSlotCurrentIndexProp:_,component:g,pinId:y,setShowEditModal:S}),j=t._('Pin Saved', 'PinRepEditButton.SavedButtonLabel', 'saved button label on pin'),w=(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(n.hU,{accessibilityLabel:t._('Edit', 'edit button on pin', 'edit button on pin'),bgColor:d&&d.bgColor||"white",icon:"edit",iconColor:d&&d.iconColor||"darkGray",onClick:P,size:d&&d.size||"md"}),x&&y&&(0,o.jsx)(l.Z,{carouselSlotCurrentIndex:k,clientTrackingParams:a,onDelete:m,onHide:()=>{S(!1),b?.(!1)},onSubmit:f,pinId:y})]});return p?(0,o.jsx)(n.Fm,{accessibilityLabel:j,color:"primary",dataTestId:"saved-button",onClick:m,selected:!0,size:"VideoCarouselModule"===v?"sm":"lg",text:t._('Saved', 'PinRepEditButton.SavedButton', 'saved button on pin')}):c||u?(0,o.jsx)("div",{"data-test-id":"use-lego-styles-div",style:{...h||{}},children:w}):w}},154010:(e,t,a)=>{a.d(t,{KA:()=>r,T3:()=>n,Ur:()=>l,i5:()=>i,kx:()=>s});let i={AT:14,BE:13,BG:14,HR:16,CY:14,CZ:15,DK:13,EE:14,FI:13,FR:15,DE:16,GR:15,HU:16,IE:16,IT:14,LV:13,LT:14,LU:16,MT:13,NL:16,PL:16,PT:13,RO:16,SK:16,SI:15,ES:14,SE:13,GB:13},n={...i,KR:14},r=16,l=13,s=5},724027:(e,t,a)=>{a.d(t,{Z:()=>i});let i={BOARD_PICKER:"board_picker",ORGANIZE_PINS:"organize_pins",PROFILE:"profile",PIN_CLUSTER:"create_pin_cluster_page"}},665605:(e,t,a)=>{a.d(t,{Z:()=>z});var i,n,r,l,s=a(667294),o=a(19963),d=a(174646),c=a(538645),u=a(755090);a(167912);var h=a(20256),p=a(78039),_=a(219308),g=a(611395),m=a(670810),f=a(952e3),b=a(785893);let y=(void 0!==i||(i=a(841582)).hash&&"6ddea2ecd3dff2e1001c1e4d037cc858"!==i.hash&&console.error("The definition of 'CallToAction_advisoryAction' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function v({auxData:e,actionKey:t,alignCenter:a}){let i=(0,p.Z)(y,t),n=(0,_.Z)(),r=(0,c.HG)(),{title:l,description:o,button:d}=i,u=d?.text,v=l?.text,x=o?.text,S=d?.link??"",P=S.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""),k=u&&S.startsWith("http"),j=(0,g.Z)({url:S}),w=k&&j?"nofollow":"none";return e?.advisory_type===f.Uv?(0,b.jsx)(s.Fragment,{children:(0,b.jsxs)(h.kC,{direction:"column",gap:3,justifyContent:"start",children:[!!v&&(0,b.jsx)(h.xv,{align:"start",weight:"bold",children:v}),!!x&&(0,b.jsx)(h.xv,{align:"start",children:x}),(0,b.jsx)(h.ZP,{color:"white",href:S,onClick:()=>{(0,m.qA)({auxData:{...e,url:S},isDesktop:r,logContextEvent:n})},rel:w,text:u||"Visit"})]})}):k?(0,b.jsxs)(s.Fragment,{children:[(0,b.jsx)(h.xu,{marginBottom:1,children:(0,b.jsx)(h.xv,{align:a?"center":"start",weight:"bold",children:""!==u?u:"Visit"})}),(0,b.jsx)(h.xu,{marginBottom:1,children:(0,b.jsx)(h.rU,{href:S,onClick:()=>{(0,m.qA)({logContextEvent:n,auxData:{...e,url:S},isDesktop:r})},rel:w,children:(0,b.jsx)(h.xv,{align:a?"center":"start",lineClamp:1,underline:!0,weight:"normal",children:P})})})]}):(0,b.jsxs)(s.Fragment,{children:[!!v&&(0,b.jsx)(h.xu,{marginBottom:1,children:(0,b.jsx)(h.xv,{align:a?"center":"start",weight:"bold",children:v})}),!!x&&(0,b.jsx)(h.xu,{marginBottom:1,children:(0,b.jsx)(h.xv,{align:a?"center":"start",children:x})})]})}let x=(void 0!==n||(n=a(797510)).hash&&"4970946a36017d9ad0c751fd70cc512c"!==n.hash&&console.error("The definition of 'HyperlinkFormatText_textTag' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function S({text:e,textTags:t,auxData:a}){let i=(0,_.Z)(),n=(0,c.HG)(),r=[],l=0;for(let s=0;s<t.length;s+=1){let o=t[s];if(5===o.tagType&&o.link){let{offset:t,length:s,link:d}=o;if(null!=t&&null!=s&&null!=d){let o=e.substring(t,t+s),c=(0,b.jsx)(h.xv,{inline:!0,weight:"bold",children:(0,b.jsx)(h.rU,{display:"inlineBlock",href:d,onClick:()=>{(0,m.qA)({logContextEvent:i,auxData:{...a,url:d},isDesktop:n})},target:"blank",underline:"hover",children:o},o)});r.push((0,b.jsx)("span",{children:e.substring(l,t)})),r.push(c),l=t+s}}}return(l>0&&r.push((0,b.jsx)("span",{children:e.substring(l)})),0===r.length)?[(0,b.jsx)("span",{children:e})]:r}function P({auxData:e,textTagKey:t,text:a}){let i=(0,p.Z)(x,t);return(0,b.jsx)(S,{auxData:e,text:a,textTags:i})}let k=[4,14],j={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},w={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},I=(void 0!==r||(r=a(360337)).hash&&"5879c4710b107f258f42156bf3e47e37"!==r.hash&&console.error("The definition of 'DefaultNotice_advisoryNotice' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function C({auxData:e,advisory:t,inModal:a,noticeKey:i}){let{title:n,description:r,actions:l}=(0,p.Z)(I,i),s=!!l?.length&&(e?.advisory_type===f.Uv||!!t&&k.includes(t)),o=l?.length===1,d=r&&r.text||"";return(0,b.jsxs)(h.xu,{dangerouslySetInlineStyle:{__style:a?w:j},padding:6,rounding:2,children:[!!n&&!a&&(0,b.jsx)(h.xu,{display:"flex",marginBottom:2,children:(0,b.jsx)(h.X6,{size:"600",children:n})}),!!d&&r?.textTags!=null&&(0,b.jsx)(h.xu,{"data-test-id":"search-advisory",marginBottom:4,children:(0,b.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:(0,b.jsx)(h.xv,{align:a?"center":"start",overflow:"normal",children:(0,b.jsx)(P,{auxData:e,text:d,textTagKey:r.textTags})})})}),s&&(0,b.jsx)(h.xu,{direction:a?"column":"row",display:"flex",marginEnd:-2,marginStart:-2,wrap:!0,children:l?.map(t=>(0,b.jsx)(h.xu,{column:a||o?12:6,paddingX:2,paddingY:1,children:(0,b.jsx)(v,{actionKey:t,alignCenter:a||o,auxData:e})},t.actionId))})]})}let A=(void 0!==l||(l=a(465899)).hash&&"53d7eec34666980eda011429185b5b10"!==l.hash&&console.error("The definition of 'LegoNotice_advisoryNotice' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function T({auxData:e,noticeKey:t}){let a=(0,p.Z)(A,t),i=(0,_.Z)(),n=(0,c.HG)(),r={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return(0,b.jsxs)(h.xu,{alignItems:"center",direction:"column",display:"flex",marginBottom:3,width:"100%",children:[(0,b.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",rounding:8,width:656,children:(0,b.jsxs)(h.xu,{"data-test-id":"search-advisory",height:"100%",padding:10,width:"100%",children:[(0,b.jsx)("span",{style:r,children:a.description?.textTags&&(0,b.jsx)(P,{text:a.description?.text||"",textTagKey:a.description.textTags})}),(0,b.jsx)(h.xu,{marginTop:6,children:(a.actions??[]).map(t=>{let a=t.button?.link;return a&&a.startsWith("tel")?(0,b.jsxs)(h.xu,{children:[(0,b.jsx)("span",{style:{fontWeight:"600",...r},children:t.title?.text}),(0,b.jsx)("span",{style:r,children:t.description?.text})]}):(0,b.jsx)(h.rU,{href:a||"",onClick:()=>{(0,m.qA)({logContextEvent:i,auxData:{...e,url:a||"",isLegoNotice:!0},isDesktop:n})},children:(0,b.jsx)(h.xu,{display:"inlineBlock",children:(0,b.jsx)(h.xu,{alignItems:"center",color:"infoBase",display:"flex",height:44,justifyContent:"center",paddingX:12,rounding:"pill",children:(0,b.jsx)(h.xv,{color:"inverse",weight:"bold",children:t.button?.text||""})})})})})})]})}),!!a.footer&&(0,b.jsx)(h.xu,{paddingY:2,width:540,children:(0,b.jsx)(h.rU,{display:"inlineBlock",href:a.footer.link??"",onClick:()=>{(0,m.qA)({logContextEvent:i,auxData:{...e,url:a.footer?.link??"",isLegoNotice:!0},isDesktop:n})},target:"blank",underline:"hover",children:(0,b.jsx)(h.xv,{align:"center",color:"subtle",size:"100",children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:a.footer.text??""}})})},a.footer.link)})]})}var B=a(992114);function z({boardId:e,boardSectionId:t,notices:a,query:i,sensitivity:n,viewParameter:r,viewType:l,inModal:h}){!function({advisoryDetails:e,boardId:t,boardSectionId:a,query:i,sensitivity:n,viewParameter:r,viewType:l}){let{logContextEvent:s}=(0,o.u)(),d=(0,c.HG)();(0,u.Z)(()=>{l&&(s({aux_data:{entered_query:i,advisory_details:e,advisory_level:n?.advisory,severity_level:n?.severity,advisory_type:n?.advisory_type,resource_country:n?.resource_country},component:13367,event_type:120,view_parameter:r,view_type:l}),(0,B.QX)("webapp.searchAdvisories.view",1,{sampleRate:1,tags:{advisory_level:n?.advisory,advisory_type:n?.advisory_type,app:d?"DESKTOP_WEB":"MOBILE_WEB",resource_country:n?.resource_country,placement:5===l?"board":"search"}})),t&&5===l&&s({aux_data:{board_id:t,board_section_id:a??0},component:178,event_type:15549,view_parameter:r,view_type:l})})}({advisoryDetails:n?.advisory_details,boardId:e,boardSectionId:t,query:i,sensitivity:{advisory:n?.advisory,severity:n?.severity},viewParameter:r,viewType:l});let p=(0,d.B)(),_={advisory_level:n?.advisory||null,severity_level:n?.severity||null,advisory_type:n?.advisory_type||"",stage:p.stage,resource_country:n?.resource_country||"",entered_query:i||""};return(0,b.jsx)(s.Fragment,{children:a?.map(e=>2===e.style?(0,b.jsx)(T,{auxData:_,noticeKey:{type:"deprecated",data:e}},e.id):(0,b.jsx)(C,{advisory:n?.advisory,inModal:h,noticeKey:{type:"deprecated",data:e}},e.id))})}},742715:(e,t,a)=>{a.d(t,{Z:()=>c});var i=a(667294),n=a(20256),r=a(233846),l=a(653810),s=a(785893);function o(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends i.Component{constructor(...e){super(...e),o(this,"setInputRef",e=>{e&&(this._input=e)}),o(this,"handleKeyDown",e=>{let{event:t}=e,{disabled:a,indexManager:i}=this.props;if(!a)switch(t.which){case l.Z.ENTER:case l.Z.NUMPAD_ENTER:t.preventDefault(),i.select();break;case l.Z.UP:t.preventDefault(),i.prev();break;case l.Z.DOWN:t.preventDefault(),i.next()}})}componentDidMount(){this._input&&this._input.focus()}render(){let{onChange:e,value:t}=this.props;return(0,s.jsx)(n.xu,{"data-test-id":"picker-search-field-container",role:"presentation",width:"100%",children:(0,s.jsx)(n.Um,{ref:this.setInputRef,accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:"lg",value:t})})}}let c=function(e){let t=(0,r.ZP)();return(0,s.jsx)(d,{...e,i18n:t})}},521990:(e,t,a)=>{a.d(t,{Z:()=>g});var i=a(667294),n=a(20256),r=a(233846),l=a(829117),s=a(840119),o=a(742715),d=a(224248),c=a(818539),u=a(179096),h=a(785893);function p(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends i.Component{constructor(...e){super(...e),p(this,"state",{searchQuery:""}),p(this,"handleSelectItem",e=>{let{onCreate:t,onSelected:a}=this.props;if(!e&&t){let{searchQuery:e}=this.state;t(e)}else e&&a(e);(t||e)&&this.setState({searchQuery:""})}),p(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),p(this,"renderSectionHeader",e=>e.title?(0,h.jsx)(n.xu,{children:(0,h.jsx)(n.xu,{paddingX:3,paddingY:1,children:(0,h.jsx)(n.xv,{size:"200",children:e.title})})}):null),p(this,"renderRow",({item:e,hovered:t,sectionProps:a={}})=>{let{boardSavedTo:i,isSelectMode:n,disabledRowId:r}=this.props,{searchQuery:l}=this.state,{inSectionSelection:s=!1}=a,o=i&&i.board===e.id?i&&i.state:null,c="board_section"===e.type;return(0,h.jsx)(d.Z,{disabled:e.id===r&&s,isSection:c,isSelectMode:n,isWithinSectionPicker:s,item:e,saveState:o,searchQuery:l,selected:t})})}render(){let{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:a,getSections:i,isLoaded:r,onCreate:d,pinId:p}=this.props;if(!r)return(0,h.jsx)(n.xu,{paddingY:5,children:(0,h.jsx)(n.xH,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility label for the loading spinner the repin picker', 'accessibility label for the loading spinner the repin picker'),show:!0})});{let{searchQuery:r}=this.state,_=i(r);return this.indexManager=new l.Z(_.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),(0,h.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:{zIndex:0}},direction:"column",display:"flex",flex:"grow",height:"100%",minHeight:0,overflow:"auto",children:[!a&&(0,h.jsx)(n.xu,{children:(0,h.jsx)(n.xu,{marginBottom:4,marginTop:1,paddingX:3,children:(0,h.jsx)(o.Z,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:r})})}),(0,h.jsx)(s.Z,{disabled:!!e,grow:!a&&!r,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:_}),d&&(0,h.jsx)(n.xu,{borderStyle:_.length>1?"shadow":"none",children:(0,h.jsx)(u.Z,{buttonLabel:t,hasHoverState:!0,name:r,onClick:()=>d(r)})}),a&&d&&p&&(0,h.jsx)(c.Z,{onBoardSelected:d,pinId:p})]})}}}function g(e){let t=(0,r.ZP)();return(0,h.jsx)(_,{...e,i18n:t})}},483863:(e,t,a)=>{a.d(t,{j:()=>r});let i={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},n=e=>{if(!e)return"";let t="";for(let a=0;a<e.length;a+=1)t+=i[e.charAt(a)]||e.charAt(a);return t},r=(e,t,a="name")=>{let i=t.toLowerCase();return e.filter(e=>((e,t)=>{let a=t.split(" "),i=e.split(" "),r=0;for(let e=0;e<i.length;e+=1)(n(i[e]).includes(a[r])||i[e].includes(a[r]))&&(r+=1);return r===a.length})(e[a].toLowerCase(),i))}},328065:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(667294),n=a(169650);function r(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends i.PureComponent{constructor(...e){super(...e),r(this,"setContainerRef",e=>{this.containerRef=e}),r(this,"fetchMoreIfNecessary",(0,n.Z)(()=>{let{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:a},i)=>e+t+(i?i(t):2*t)>a)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){let{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},191011:(e,t,a)=>{a.d(t,{Z:()=>i});let i=4},772233:(e,t,a)=>{a.d(t,{MD:()=>q,xH:()=>Q,uC:()=>Y,sR:()=>X,DR:()=>G});var i=a(667294),n=a(545007),r=a(172045),l=a(20256),s=a(19963),o=a(397657),d=a(297934),c=a(233846),u=a(970601),h=a(51340),p=a(967312),_=a(174646),g=a(801393),m=a(113474),f=a(178592),b=a(152),y=a(488879),v=a(724027),x=a(719311),S=a(755090),P=a(785893);function k({children:e,headingLevel:t,textWeight:a="normal",size:i}){return(0,P.jsx)(l.X6,{accessibilityLevel:t,size:i,children:(0,P.jsx)(l.xv,{inline:!0,size:i,weight:a,children:e})})}function j({boardPickerSuggestedBoards:e,clientTrackingParams:t,imageSignature:a,index:i,item:n,pinId:r,saveSessionId:o,surfaceOriginViewParameter:d,useLegoLayout:c}){let{logContextEvent:u}=(0,s.u)();return(0,S.Z)(()=>{"shortlist"===n.category&&u({aux_data:{board_picker_surface_origin:d,board_picker_suggested_boards:e,image_signature:a,pin_id:r,save_session_id:o},event_type:13,clientTrackingParams:t,view_type:21,view_parameter:3988})}),(0,P.jsx)(l.xu,{marginTop:i>0?2:1,paddingX:c?4:3,paddingY:1,children:(0,P.jsx)(k,{headingLevel:3,size:c?"100":"200",children:n.title})})}var w=a(69401),I=a(647937);let C=e=>{let{accessibilityLabelText:t,board:a,boardPickerSuggestedBoards:n,buttonText:r,clientTrackingParams:s,displayAlreadySavedMsg:o,i18n:d,imageSignature:c,isSectionOpen:u,logContextEvent:h,onButtonClick:p,onClick:_,pinId:g,saveSessionId:m,shouldOpenSections:f=!0,showSaveToProfile:b,showFlyoutSaveButton:y=!0,surfaceOriginViewParameter:v,useLegoLayout:x}=e,[S,k]=(0,i.useState)(!1),j=(0,i.useRef)(null),C=!!a.section_count&&a.section_count>0,{images:A,image_cover_url:T}=a||{},B=!T?.includes("custom")&&A&&A["75x75"]&&A["75x75"][A["75x75"].length-1].url||T;(0,i.useEffect)(()=>{"boardless"===a.type&&h({aux_data:{board_picker_surface_origin:v,board_picker_suggested_boards:n,image_signature:c,pin_id:g,save_session_id:m},clientTrackingParams:s,event_type:13,view_parameter:3990,view_type:21})},[]);let z=()=>{_(a)};return(0,P.jsx)(l.xu,{"data-test-id":C?"boardWithSection":"boardWithoutSection",children:(0,P.jsx)(l.iP,{ref:j,onBlur:()=>{k(!1)},onFocus:()=>{k(!0)},onMouseEnter:()=>{k(!0)},onMouseLeave:()=>{k(!1)},onTap:z,children:(0,P.jsxs)(l.xu,{alignItems:"center",color:S?"secondary":"default","data-test-id":`board-row-${a.name||""}`,display:"flex",height:x?64:52,marginBottom:+!x,marginEnd:x?2:3,marginStart:x?2:3,marginTop:+!x,padding:2*!!x,rounding:3,children:[(0,P.jsxs)(l.xu,{"aria-hidden":"true",flex:"none",height:x?48:36,marginBottom:+!x,marginEnd:x?2:3,marginStart:2*!x,marginTop:+!x,overflow:"hidden",width:x?48:36,children:[b&&"boardless"===a.type&&(0,P.jsx)(l.zd,{height:"100%",rounding:2,width:"100%",children:(0,P.jsx)(l.xu,{alignItems:"center",color:S?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,P.jsx)(l.xu,{children:(0,P.jsx)(l.JO,{accessibilityLabel:d._('Save to profile icon', 'BoardRow.TapArea.Icon', 'Icon to indicate saving to profile.'),color:"default",icon:"history",size:24})})})}),B&&!f&&(0,P.jsx)(l.zd,{height:x?48:36,rounding:2,wash:!0,width:x?48:36,children:(0,P.jsx)(l.Ee,{alt:"",fit:"cover",naturalHeight:x?48:36,naturalWidth:x?48:36,src:B})}),B&&f?(0,P.jsx)(l.zd,{height:x?48:36,rounding:2,wash:!0,width:x?48:36,children:(0,P.jsx)(l.Ee,{alt:"",fit:"cover",naturalHeight:x?48:36,naturalWidth:x?48:36,src:B})}):(0,P.jsx)(l.zd,{height:x?48:36,rounding:2,width:x?48:36,children:(0,P.jsx)(l.xu,{color:f?"secondary":"transparent",height:"100%",width:"100%"})})]}),(0,P.jsxs)(l.xu,{flex:"grow",marginStart:+!x,overflow:"hidden",paddingY:1,children:[(0,P.jsx)(l.xv,{lineClamp:1,overflow:"breakAll",weight:f||!f?"bold":"normal",children:a.name}),o&&(0,P.jsx)(l.xu,{marginTop:1,children:(0,P.jsx)(l.xv,{align:"start",color:"default",size:"100",children:d._('Saved here already', 'BoardFlyout.AlreadySaved.Message', 'Text that indicates if a pin has been already saved to a board')})})]}),(0,P.jsxs)(l.kC,{alignItems:"center",gap:2,children:[(0===a.section_count||!f)&&y&&(0,P.jsx)(l.xu,{"data-test-id":"board-row-save-button-container",flex:"none",opacity:+!!S,children:(0,P.jsx)(l.zx,{accessibilityLabel:t||d._('save', 'boardRow.saveButton', 'Default accessibility label for the board row save button'),color:"red","data-test-id":"board-row-save-button",onClick:({event:e})=>{z(),p&&p(),e.stopPropagation()},tabIndex:-1,text:r||d._('Save', 'save button', 'save button')})}),a&&!u?(0,P.jsx)(l.xu,{marginEnd:2*!x,children:(0,P.jsx)(I.Z,{board:a,showCollaborativeIcon:!!a.is_collaborative,showPrivateIcon:a.privacy===w.ZP.BoardPrivacy.SECRET,showProtectedIcon:a.privacy===w.ZP.BoardPrivacy.PROTECTED,showSectionsIcon:C&&f,useLegoLayout:x})}):null]})]})})})},A=e=>{let{logContextEvent:t}=(0,s.u)(),a=(0,c.ZP)();return(0,P.jsx)(C,{...e,i18n:a,logContextEvent:t})};var T=a(827491),B=a(434196);function z(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class R extends i.Component{constructor(...e){super(...e),z(this,"state",{hovered:!1}),z(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),z(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),z(this,"handleTouch",()=>{let{board:e,onClick:t,section:a}=this.props;t(a,e)}),z(this,"handleButtonClick",({event:e})=>{let{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),z(this,"tapAreaRef",(0,i.createRef)())}focus(){let e=this.tapAreaRef.current;e&&e.focus()}render(){let{hovered:e}=this.state,{buttonText:t,section:a,showSectionSaveButton:i,useLegoLayout:n}=this.props;return(0,P.jsx)(l.iP,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,P.jsxs)(l.xu,{alignItems:"center",color:e?"secondary":"default",dangerouslySetInlineStyle:{__style:n?{}:{marginLeft:53,marginRight:11}},"data-test-id":`section-row-${a.title||""}`,display:"flex",height:n?64:52,marginEnd:2*!!n,marginStart:2*!!n,marginTop:+!n,padding:2*!!n,rounding:3,children:[n&&!!a.preview_pins?.length&&(0,P.jsx)(B.Z,{image_url:a.preview_pins[0].image_square_url??"",naturalHeight:a.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:a.preview_pins[0].image_square_size_pixels?.width??1}),(0,P.jsx)(l.xu,{flex:"grow",marginStart:4*!n,paddingY:1,children:(0,P.jsx)(l.xv,{lineClamp:1,weight:n?"bold":"normal",children:a.title})}),e&&i&&(0,P.jsx)(l.xu,{flex:"none",marginEnd:2*!n,children:(0,P.jsx)(l.zx,{accessibilityLabel:"save button",color:"red",onClick:this.handleButtonClick,text:t||this.props.i18n._('Save', 'save button', 'save button')})})]})})}}function F(e){let t=(0,c.ZP)();return(0,P.jsx)(R,{...e,i18n:t})}function E(e){let t=(0,c.ZP)(),{board:a,buttonText:i,onClick:n,onButtonClick:r,showSectionSaveButton:s,useLegoLayout:o}=e,u=(0,T.Z)(),h=(0,d.Z)(),p=(0,y.lJ)(h,u),_=(0,m.Z)({name:"BoardSectionsRepinResource",options:{board_id:a.id,orbac_subject_id:p},noCache:!0}),g=_&&_.data||[];return(0,P.jsxs)(l.xu,{children:[!_.isLoaded&&(0,P.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,P.jsx)(l.xH,{accessibilityLabel:t._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),_.isLoaded&&(0,P.jsxs)(l.xu,{children:[o&&(0,P.jsx)(l.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(k,{headingLevel:3,size:"100",children:t._('Section', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),g.map(e=>(0,P.jsx)(F,{board:a,buttonText:i,onButtonClick:r,onClick:n,section:e,showSectionSaveButton:s,useLegoLayout:o},e.id))]})]})}function L({onClick:e,title:t,showIcon:a}){let n=(0,c.ZP)(),[r,s]=(0,i.useState)(!1);return(0,P.jsx)(l.iP,{dataTestId:"board-suggestion-row-button",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onTap:()=>{e({title:t})},children:(0,P.jsxs)(l.xu,{alignItems:"center",color:r?"secondary":"default",display:"flex",height:a?64:52,marginBottom:1,marginEnd:3,marginStart:3,rounding:3,children:[(0,P.jsx)(l.xu,{flex:"none",height:a?48:36,marginBottom:1,marginEnd:3,marginStart:a?1:2,marginTop:1,overflow:"hidden",rounding:a?2:1,width:a?48:36,children:(0,P.jsx)(l.xu,{alignItems:a?"center":void 0,color:"secondary",display:a?"flex":void 0,height:"100%",justifyContent:a?"center":void 0,width:"100%",children:a&&(0,P.jsx)(l.JO,{accessibilityLabel:n._('Create board icon', 'BoardSuggestionRow.AccessibilityLabel.Text', 'accessibility label text form add icon'),color:"default",icon:"add",size:20})})}),(0,P.jsx)(l.xu,{flex:"grow",paddingY:1,children:(0,P.jsx)(l.xv,{lineClamp:1,weight:"bold",children:t})}),r&&(0,P.jsx)(l.xu,{marginEnd:2,children:(0,P.jsx)(l.zx,{accessibilityLabel:"create button",color:"red",text:n._('Create', 'create button to create a new board', 'create button to create a new board')})})]})})}function D(e){let t=(0,c.ZP)(),{suggestionsResource:a,onClick:n,pinBuilderSuggestions:r,inWebRepinFlowExp:s}=e,o=r||a&&a.data||[],d=(0,P.jsxs)(i.Fragment,{children:[s&&(0,P.jsx)(l.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(k,{headingLevel:3,size:"100",children:t._('Suggestions', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),o.map((e,t)=>(0,P.jsx)(L,{onClick:n,showIcon:s,title:e.title},t))]});return(0,P.jsx)(i.Fragment,{children:o?d:(0,P.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,P.jsx)(l.xH,{accessibilityLabel:t._('loading board suggestions', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})})}z(R,"defaultProps",{showSectionSaveButton:!0});var Z=a(247854);function K({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:a}){let n=(0,c.ZP)(),[r,s]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1);return(0,P.jsx)(l.xu,{"data-test-id":"create-board",display:"flex",height:"100%",rounding:2,children:(0,P.jsx)(l.iP,{dataTestId:e?"create-board-button":"create-section-button",onBlur:()=>d(!1),onFocus:()=>d(!0),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onTap:t,rounding:2,children:(0,P.jsxs)(l.xu,{alignItems:"center",color:r?"secondary":"default",dangerouslySetInlineStyle:{__style:{...o?{border:`2px solid ${Z.nTo}`}:{}}},display:"flex",height:"100%",padding:a?4:2,width:"100%",children:[(0,P.jsx)(l.xu,{color:a?"secondary":"transparent",dangerouslySetInlineStyle:{__style:a?{padding:"14px"}:{}},marginEnd:a?2:5,marginStart:4*!a,rounding:2*!!a,children:(0,P.jsx)(l.JO,{accessibilityLabel:"",color:a?"default":"error",icon:a?"add":"add-circle",size:a?20:28})}),e?(0,P.jsx)(l.xv,{align:"center",lineClamp:1,weight:"bold",children:n._('Create board', ' - ', ' -- ')}):(0,P.jsx)(l.xv,{align:"center",lineClamp:1,weight:"bold",children:n._('Create section', ' - ', ' -- ')})]})})})}var M=a(483863),N=a(128218);function O(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let U="allBoards",H="shortlist",W=`
.BoardsSlideLeft {
  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRight {
  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideLeftRTL {
  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRightRTL {
  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

@keyframes boardFlyoutSlideLeft {
  from {
    margin-left: 0%;
  }

  to {
    margin-left: -100%;
  }
}

@keyframes boardFlyoutSlideRight {
  from {
    margin-left: -100%;
  }

  to {
    margin-left: 0%;
  }
}

@keyframes boardFlyoutSlideLeftRTL {
  from {
    margin-right: -100%;
  }

  to {
    margin-right: 0%;
  }
}

@keyframes boardFlyoutSlideRightRTL {
  from {
    margin-right: 0%;
  }

  to {
    margin-right: -100%;
  }
}
`;class q extends i.PureComponent{constructor(...e){super(...e),O(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,r.Z)()}),O(this,"handleScroll",()=>{let{_container:e}=this,{logContextEvent:t}=this.props;t({event_type:110,component:13282,view_type:21})}),O(this,"refHandler",e=>{this.removeEventListeners(),e&&e.addEventListener("scroll",this.handleScroll,{once:!0}),this._container=e}),O(this,"getItems",e=>{let{boardResource:t,changeBoardModal:a,showSaveToProfile:i}=this.props;if(!t?.data)return[];let{all_boards:n}=t.data,r=n.length>=3&&i,l=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:this.props.i18n._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],s=this.getAllBoards().map((e,t)=>this.mapBoards(e,U,t)),o=this.getShortlist().map((e,t)=>this.mapBoards(e,H,t)),d=!r&&i&&!a&&n.length>=3?[...l,...o.slice(0,2)]:o,{searchQuery:c}=this.state;return c.length>=f.Z?[...(0,M.j)(s,c)]:[...n.length<3&&i?[{type:"header",title:this.props.i18n._('Quick save and organize later', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle', 'Header saving to profile')},...l]:[],...n.length>=3&&r?l:[],...n.length>=3&&d&&d.length?[{category:H,type:"header",title:e?this.props.i18n._('Top choices', 'PinBetterSave.BoardFlyout.TopChoicesSectionTitle', 'Header for top suggestions in board picker'):this.props.i18n._('Top board suggestions', 'Header for top suggesions in board picker', 'Header for top suggesions in board picker')},...d]:[],...n.length>0?[{type:"header",title:n.length<3&&i?this.props.i18n._('Save to board', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle', 'Header for boards when there are less than 3 boards in board picker'):this.props.i18n._('All boards', 'Header for all boards in board picker', 'Header for all boards in board picker')},...s]:[]]}),O(this,"mapBoards",(e,t,a)=>{let{selectedBoardId:i,selectedBoardCategory:n}=this.state,r=e.id===i&&t===n;return{...e,category:t,isOpen:r,gridIndex:a}}),O(this,"handleBack",()=>{let{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),O(this,"handleSectionClick",(e,t)=>{let{clientTrackingParams:a,imageSignature:i,logContextEvent:n,onItemChosen:r,pinId:l,surfaceOriginViewParameter:s}=this.props,{saveSessionId:o,searchQuery:d}=this.state;n({event_type:101,clientTrackingParams:a,component:13282,element:36,object_id_str:t.id,view_type:91,view_parameter:3133,aux_data:{board_id:t.id,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,image_signature:i,is_profile_save:!1,pin_id:l,save_session_id:o,search_query:d,section_id:e.id}}),r({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url,ownerUsername:t.owner&&t.owner.username||""})}),O(this,"getPinBuilderSuggestions",async()=>{let{clientTrackingParams:e,imageSignature:t,logContextEvent:a,pinId:i,surfaceOriginViewParameter:n}=this.props,{saveSessionId:r}=this.state;if(i){let l=await (0,o.Z)({url:`/v3/pins/${i}/board_title_suggestions/`,data:{pin_id:i}});if(l.resource_response.data){let s=l.resource_response.data.map(e=>({title:e.title,metadata:JSON.parse(e?.metadata??"{}")}))||[];this.setState({boardSuggestions:s}),a({aux_data:{board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:t,pin_id:i,save_session_id:r},component:13282,clientTrackingParams:e,event_type:13,view_parameter:3992,view_type:21})}}}),O(this,"getAllBoards",()=>{let{boardResource:e,advertiser_id:t}=this.props;return(e?.data?.all_boards||[]).filter(e=>!t||"secret"!==e.privacy)}),O(this,"getShortlist",()=>{let{suggestedBoardsShortListResource:e,displayShortlistMostRecentBoard:t,boardResource:a}=this.props,i=a?.data?.boards_shortlist||[];return t?i:e?.data||[]}),O(this,"getBoards",e=>e===U?this.getAllBoards():e===H?this.getShortlist():[]),O(this,"getSuggestedBoardsIds",()=>{let{showSaveToProfile:e}=this.props,t=(e?this.getShortlist().slice(0,2):this.getShortlist()).map(e=>e.id);return e&&t.unshift("PROFILE_PINS"),t}),O(this,"getTopChoiceBoardsAuxData",()=>{let{showSaveToProfile:e}=this.props;return(e?this.getShortlist().slice(0,2):[...this.getShortlist()]).map(e=>({board_title_id:String(e.id),board_title_kind:JSON.parse(e.recommendation_reason??"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(e.recommendation_reason??"{}").score}))}),O(this,"getBoardTitleSuggestionsAuxData",()=>{let{boardSuggestions:e}=this.state;return e.map(e=>({board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}))}),O(this,"handleBoardWithSectionsClick",e=>{let{clientTrackingParams:t,logContextEvent:a,pinId:i,setBoardWithSection:n,surfaceOriginViewParameter:r}=this.props,{saveSessionId:l,searchQuery:s,selectedBoardId:o,selectedBoardCategory:d}=this.state,c=this.getBoards(e.category).find(({id:t})=>t===e.id),u=o===e.id&&d===e.category;a({event_type:13,clientTrackingParams:t,component:13282,element:36,object_id_str:e.id,view_type:275,aux_data:{board_id:e.id,board_picker_surface_origin:r,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,is_profile_save:!1,pin_id:i,save_session_id:l,search_query:s}}),c&&n&&n(c),this.setState({isSectionOpen:!0,selectedBoardId:u?"":e.id,selectedBoardCategory:u?"":e.category})}),O(this,"handleBoardClick",({board:e,toggleSections:t})=>{let{clientTrackingParams:a,imageSignature:i,logContextEvent:n,onItemChosen:r,pinId:l,surfaceOriginViewParameter:s}=this.props,{saveSessionId:o,searchQuery:d}=this.state;this.setState({searchBoxFocused:!1}),t?(n({event_type:101,component:13282,element:36,clientTrackingParams:a,object_id_str:e.id,view_type:91,view_parameter:e.category===H?3988:3989,aux_data:{board_id:e.id,board_component:e.category===H?3988:3989,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:i,is_profile_save:!1,pin_id:l,save_session_id:o,search_query:d}}),this.handleBoardWithSectionsClick({category:e.category,gridIndex:e.gridIndex,id:e.id})):(n("boardless"===e.type?{event_type:101,clientTrackingParams:a,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:3990,aux_data:{board_id:e.id,board_component:3990,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:i,is_profile_save:!0,pin_id:l,save_session_id:o,search_query:d}}:{event_type:101,clientTrackingParams:a,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:e.category===H?3988:3989,aux_data:{board_id:e.id,board_component:e.category===H?3988:3989,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:i,is_profile_save:"boardless"===e.type,pin_id:l,save_session_id:o,search_query:d}}),r({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url,privacy:e.privacy}))}),O(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),O(this,"handleCreateBoardClick",e=>{let{clientTrackingParams:t,imageSignature:a,logContextEvent:i,onBoardCreate:n,pinId:r,surfaceOriginViewParameter:l,surface:s}=this.props,{saveSessionId:o,searchQuery:d}=this.state;i({event_type:101,clientTrackingParams:t,component:13282,element:249,view_type:91,view_parameter:e?87:3132,aux_data:{board_component:e?87:3132,board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:a,pin_id:r,save_session_id:o,search_query:d,source:s??v.Z.BOARD_PICKER}}),n({title:d})}),O(this,"handleBoardSuggestionClick",e=>{let{clientTrackingParams:t,imageSignature:a,logContextEvent:i,onBoardCreate:n,pinId:r,surfaceOriginViewParameter:l}=this.props,{saveSessionId:s}=this.state;i({event_type:101,clientTrackingParams:t,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:l,board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:a,pin_id:r,save_session_id:s}}),n(e)})}componentWillUnmount(){this.removeEventListeners()}componentDidMount(){let{clientTrackingParams:e,logContextEvent:t,imageSignature:a,pinId:i,setBoardWithSection:n,surfaceOriginViewParameter:r}=this.props,{saveSessionId:l}=this.state;n&&n(null),t({event_type:13,component:13282,clientTrackingParams:e,element:10960,aux_data:{board_picker_surface_origin:r,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),image_signature:a,pin_id:i,save_session_id:l}})}componentDidUpdate(e){let{saveSessionId:t}=this.state,{clientTrackingParams:a}=this.props;!e.suggestedBoardsShortListResource?.isLoaded&&this.props.suggestedBoardsShortListResource?.isLoaded&&this.getSuggestedBoardsIds().length>0&&this.props.logContextEvent({event_type:13,clientTrackingParams:a,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:t}})}removeEventListeners(){let{_container:e}=this;e&&e.removeEventListener("scroll",this.handleScroll)}render(){let{accessibilityLabelText:e,boardResource:t,buttonText:a,changeBoardModal:n,clientTrackingParams:r,customItem:s,headerText:o,hideAlreadySavedMsg:d,imageSignature:c,onButtonClick:p,paneHeight:_,paneWidth:g,pinAlreadySavedBoard:m,pinId:f,requestContext:b,sectionText:y,showSaveToProfile:v,showSearchField:S,showCreateBoardButton:w,showFlyoutSaveButton:I,showSections:C,showSectionSaveButton:T,suggestedBoardsShortListResource:B,surfaceOriginViewParameter:z,useStoryboardStyle:R,useLegoLayout:F,boardFlyoutStyle:L}=this.props,{boardSuggestions:Z,isSectionOpen:M,saveSessionId:O,searchBoxFocused:H,searchQuery:q}=this.state;if(!t)return null;let{isLoaded:V,error:$}=t,J=[];(V&&!$||B&&B.data&&!B.error)&&(J=this.getItems(!!F));let G=J.filter(e=>e&&e.category===U).length;G<=3&&0===Z.length&&this.getPinBuilderSuggestions();let Y=R?200:322,X=R?214:334,Q=_||290,ee=JSON.stringify(this.getTopChoiceBoardsAuxData()),et=b.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",ea="";null!==M&&(ea=b.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");let ei=e=>(0,P.jsxs)(i.Fragment,{children:[!F&&(0,P.jsx)(l.iz,{}),(0,P.jsx)(l.xu,{borderStyle:F&&G>=3&&J.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},height:F?80:52,overflow:"hidden",children:(0,P.jsx)(K,{isBoardCreate:e,onCreateBoardClick:({event:t})=>{t.stopPropagation(),this.handleCreateBoardClick(e)},useLegoLayout:F})})]});return(0,P.jsxs)(l.xu,{color:"default","data-test-id":"board-picker-flyout",height:R||n?"100%":F?498:439,overflow:"hidden",rounding:2,width:F&&!n?"100%":g,zIndex:x.lI,children:[(0,P.jsx)(u.Z,{unsafeCSS:W}),V?null:(0,P.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:F&&!n?360:g,children:(0,P.jsx)(l.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),(0,P.jsx)(l.kC,{direction:"row",children:V&&(0,P.jsx)("div",{className:M?et:ea,children:(0,P.jsx)(l.xu,{position:"relative",children:(0,P.jsxs)(l.xu,{direction:"row",display:"flex",width:F&&!n?720:(g??0)*2,zIndex:new l.Ry(0),children:[(0,P.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:F&&!n?360:g,children:[F&&!n&&(0,P.jsx)(l.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,P.jsx)(k,{headingLevel:2,size:"300",textWeight:"bold",children:o||(v?this.props.i18n._('Save', 'PinBetterSave.BoardFlyout.SavePlaceholder', 'flyout header text to indicate save options'):this.props.i18n._('Save to board', 'PinBetterSave.BoardFlyout.SaveToBoardPlaceholder', 'flyout header text'))})}),(S??!n)&&(0,P.jsxs)(l.xu,{"data-test-id":"search-boards-field-container",height:F?64:"auto",padding:L?.searchFieldStyle?.padding??3*!F,paddingX:L?.searchFieldStyle?.paddingX??(F?4:3),paddingY:L?.searchFieldStyle?.paddingY,children:[(0,P.jsx)(N.Z,{accessibilityClearButtonLabel:this.props.i18n._('Clear board search text', 'dropdown.searchField.clearButtonLabel', 'clear button label for search field in board picker'),accessibilityLabel:this.props.i18n._('Search through your boards', 'search bar placeholder text', 'search bar placeholder text'),focused:H,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:L?.searchFieldStyle?.size??"lg",value:q}),(0,P.jsx)(l.xu,{"aria-live":"assertive",display:"visuallyHidden",children:G?(0,h.Wc)(this.props.i18n.ngettext('Found a board', 'Found {{boardCount}} boards', G, 'PinBetterSave.BoardFlyout.BoardFoundsDropdown', 'Text to indicate how many boards were found in the board autocomplete. boardCount: the number of boards created by the user.'),{boardCount:G.toString()}):this.props.i18n._('No boards found', 'PinBetterSave.BoardFlyout.noBoardFoundsDropdown', 'Text to indicate no boards were found in the board autocomplete')})]}),(0,P.jsxs)(l.xu,{ref:this.refHandler,maxHeight:F?Q:Y,minHeight:F?290:Y,overflow:"scrollY",children:[B&&!B.isLoaded?(0,P.jsx)(l.xu,{"data-test-id":"suggestedBoardsContainer",children:(0,P.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,P.jsx)(l.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})}):null,s,J.map((t,i)=>"header"===t.type?(0,P.jsx)(j,{boardPickerSuggestedBoards:ee,clientTrackingParams:r,imageSignature:c,index:i,item:t,pinId:f,saveSessionId:O,surfaceOriginViewParameter:z,useLegoLayout:F},`${t.title}`):(0,P.jsx)(l.xu,{children:(0,P.jsx)(A,{accessibilityLabelText:e,board:t,boardPickerSuggestedBoards:ee,buttonText:a,clientTrackingParams:r,displayAlreadySavedMsg:m&&m.id===t.id&&!d,imageSignature:c,onButtonClick:p,onClick:e=>{this.handleBoardClick({board:e,toggleSections:C&&!!e.section_count})},pinId:f,saveSessionId:O,shouldOpenSections:C,showFlyoutSaveButton:I,showSaveToProfile:v,surfaceOriginViewParameter:z,useLegoLayout:F})},`${t.category}-${t.id}`)),G<=3&&Z.length>0&&(0,P.jsx)(D,{inWebRepinFlowExp:F,onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:Z})]}),w&&ei(!0)]}),M&&(0,P.jsxs)(l.xu,{direction:"column",display:"flex",marginBottom:2*!!F,width:F&&!n?360:g,children:[(0,P.jsxs)(l.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,P.jsx)(l.sg,{span:2,children:(0,P.jsx)(l.xu,{alignContent:"center",alignItems:"center",display:"flex",justifyContent:"start",marginStart:3,children:(0,P.jsx)(l.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,P.jsx)(l.sg,{span:8,children:(0,P.jsx)(l.kC,{alignItems:"center",height:F?64:52,justifyContent:"center",children:(0,P.jsx)(k,{headingLevel:2,size:"300",textWeight:"bold",children:y||(F?this.props.i18n._('Save Pin to', 'PinBetterSave.BoardFlyout.SectionHeader', 'Header for section header'):this.props.i18n._('Choose section', 'Header for section header', 'Header for section header'))})})}),(0,P.jsx)(l.sg,{span:2,children:(0,P.jsx)(l.xu,{})})]}),!F&&(0,P.jsx)(l.iz,{}),(0,P.jsx)(l.xu,{maxHeight:F?Q:X,minHeight:F?354:X,overflow:"scrollY",children:J?(0,P.jsx)(i.Fragment,{children:J&&J.map(e=>"header"===e.type?null:(0,P.jsx)(l.xu,{children:e.isOpen&&(0,P.jsxs)(i.Fragment,{children:[F&&(0,P.jsx)(l.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(k,{headingLevel:3,size:"100",children:this.props.i18n._('Board', 'PinBetterSave.BoardFlyout.BoardPickerTitle', 'board title on section picker')})}),(0,P.jsx)(A,{board:e,boardPickerSuggestedBoards:ee,buttonText:a,displayAlreadySavedMsg:m&&m.id===e.id,isSectionOpen:!0,onButtonClick:p,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},saveSessionId:O,shouldOpenSections:!1,showFlyoutSaveButton:I,useLegoLayout:F}),(0,P.jsx)(E,{board:e,buttonText:a,onButtonClick:p,onClick:this.handleSectionClick,showSectionSaveButton:T,useLegoLayout:F})]})},`${e.category}-${e.id}`))}):null}),w&&!n&&ei(!1)]})]})})})})]})}}function V(e){let{logContextEvent:t}=(0,s.u)(),a=(0,c.ZP)(),{checkExperiment:i}=(0,p.r)();return(0,P.jsx)(q,{...e,checkExperiment:i,i18n:a,logContextEvent:t,requestContext:(0,_.B)()})}function $(e,t,a){let{advertiser:i}=e,n={};if(a&&a.user&&a.user.username&&a.id!==(t.isAuth?t.id:void 0)&&(n.orbacActingAs=a,n.username=a.user.username),t&&i){let a=e.advertiser;if(t.isAuth&&a.is_impersonation)return{hasMUA:a.owner_user_id!==t.id,advertiser_id:a.id,username:a.owner_user_id,...n};if(t.isAuth&&a.owner_user_id!==t.id)return{hasMUA:!0,advertiser_id:a.id,username:a.owner_user_id,...n};if(t.isAuth&&a.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:a.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,...n}}function J(e){let{advertiser_id:t,hasMUA:a,boardFilter:i="all"}=e,{username:n}=e,r={field_set_key:"board_picker",filter:a?"protected":i,...n?{username:n}:Object.freeze({}),...t?{advertiser_id:t}:{}};return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(r={...r,username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:i}),r}function G(e,t){return(a,i)=>a((0,g.jB)("BoardPickerBoardsResource",J($(i(),e,t))))}function Y(e){let t=(0,d.Z)(),a=(0,n.v9)(a=>$(a,t,e.orbacActingAs)),i={...e,...a},r=(0,m.Z)({name:"BoardPickerBoardsResource",options:J(i)});return(0,P.jsx)(V,{...i,boardResource:r})}function X(e){let t=(0,b.Z)(),a=(0,d.Z)(),i=(0,y.lJ)(a,t);return(0,P.jsx)(Y,{...e,orbacActingAs:i?t:void 0})}function Q(e){let t=(0,m.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),{data:a}=(0,m.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.pinId}/`,field_sets:["pin.pinned_to_board()"]},noCache:!0});return(0,P.jsx)(V,{...e,pinAlreadySavedBoard:a?.pinned_to_board,suggestedBoardsShortListResource:t})}O(q,"defaultProps",{clientTrackingParams:void 0,paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},647937:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(20256),n=a(90040),r=a(208053),l=a(785893);let s=({collaborator_count:e,useLegoLayout:t,type:a})=>t?(0,l.jsx)(i.xu,{marginEnd:2*!!e,children:(0,l.jsx)(r.Z,{type:a})}):(0,l.jsx)(r.Z,{type:a}),o=({board:e,showCollaborativeIcon:t,showPrivateIcon:a,showProtectedIcon:o,showSectionsIcon:d,useLegoLayout:c})=>{let u=e?.collaborating_users?.length||0;return t||a||o||d?(0,l.jsxs)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:5*!c,children:[a&&(0,l.jsx)(s,{collaborator_count:u,type:"secret",useLegoLayout:c}),o&&(0,l.jsx)(s,{collaborator_count:u,type:"protected",useLegoLayout:c}),t&&(c?(0,l.jsx)(n.Z,{board:e,isCompact:!0,ownerOnly:!1}):(0,l.jsx)(r.Z,{type:"group"})),d&&(0,l.jsx)(r.Z,{type:"sections"})]}):null}},961238:(e,t,a)=>{a.r(t),a.d(t,{PinBetterSave:()=>ev,default:()=>ex});var i,n,r,l,s=a(667294),o=a(545007);a(167912);var d=a(616550),c=a(20256),u=a(578373),h=a(20047),p=a(547504),_=a(19963),g=a(69466),m=a(135376),f=a(138589),b=a(95460),y=a(18644),v=a(795209),x=a(896798),S=a(231333),P=a(297934),k=a(78039),j=a(468318),w=a(233846),I=a(51340),C=a(693806),A=a(113474),T=a(943369),B=a(831822),z=a(339908),R=a(857147),F=a(372312),E=a(460632),L=a(132588),D=a(191011),Z=a(772233),K=a(785893);function M({dropdownRef:e,hideDropdown:t=!1,isSaved:a,onBoardDropdownClick:i,onSaveClick:n,promotedIsLeadAd:r,renderPinSaveTooltip:l,selectedTitle:o,showBoardFlyout:d,unselectedText:u,view:h,surface:p}){let[_,g]=(0,s.useState)(!1),m=(0,w.ZP)(),f=(0,s.useRef)(null),{closeupWithinMasonryEnabled:b}=(0,E.x4)();(0,s.useEffect)(()=>{_&&g(!1)},[_]);let y="closeup"===h,v="media-viewer"===h,x="VideoCarouselModule"===p,S=(0,s.useMemo)(()=>v?d?"inverse":"default":d||!y?"inverse":"default",[y,d,v]),P=(0,s.useCallback)(({event:e})=>{i(e)},[i]),k=y?"transparent":"transparentWhiteText";k=v?"semiTransparentWhite":k;let j=a?m._('Saved', 'PinBetterSave.BoardSelection.SavedButton', 'BetterSave Saved label'):m._('Save', 'PinBetterSave.BoardSelection.SaveButton', 'BetterSave Save label');return(0,K.jsxs)(c.xu,{ref:e,alignItems:v?"start":"center",dangerouslySetInlineStyle:{__style:{gap:"4px"}},display:"flex",paddingX:b?0:void 0,width:"100%",children:[!t&&(0,K.jsx)(c.xu,{"data-test-id":o?"board-selection-item-selected":"board-selection-placeholder",flex:"grow",width:"100%",children:(0,K.jsx)(c.zx,{accessibilityLabel:m._('Select a board you want to save to', 'PinBetterSave.BoardSelection.DropdownIcon', 'BetterSave accessibility label to change the board'),color:k,dataTestId:"PinBetterSaveDropdown",iconEnd:"arrow-down",onClick:P,selected:d,size:x?"sm":"lg",text:(0,K.jsx)(c.xv,{color:S,lineClamp:1,overflow:"breakAll",size:x?"100":"300",weight:"bold",children:o||u})})}),(0,K.jsx)(c.xu,{alignSelf:y?"center":"start","data-test-id":"PinBetterSaveButton",flex:"none",marginStart:"auto",children:(0,K.jsx)(c.Fm,{ref:f,color:r?"secondary":"primary",onClick:({event:e})=>{t?i(e):n(e)},selected:a,size:x?"sm":"lg",text:j})}),!!l&&!!f.current&&y&&l(f.current)]})}var N=a(28755);class O extends s.PureComponent{constructor(...e){var t,a,i;super(...e),t="handleClick",a=()=>{let{boardId:e,logContextEvent:t}=this.props;t({event_type:101,component:20,element:10805,object_id_str:e})},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}componentDidMount(){let{toastShown:e}=this.props;e()}render(){let{boardName:e,boardUrl:t,onHide:a}=this.props;return(0,K.jsx)(S.Z,{duration:5e3,href:`${t}more_ideas/?ideas_referrer=16`,onClick:this.handleClick,onHide:a,text:(0,K.jsx)(c.xv,{weight:"bold",children:(0,I.nk)(this.props.i18n._('Find more ideas for {{ boardName }}', 'postRepinUpsellToast.findMoreIdeas.toast', 'Find more ideas for you board'),{boardName:e}).join("")})})}}function U(e){let{logContextEvent:t}=(0,_.u)(),a=(0,w.ZP)(),i=(0,o.I0)();return(0,K.jsx)(O,{...e,i18n:a,logContextEvent:t,toastShown:()=>i((0,N.ND)(e.boardId))})}var H=a(640935),W=a(971518),q=a(896252),V=a(774609),$=a(755090);let J=(0,s.lazy)(()=>Promise.all([a.e(99476),a.e(5271),a.e(78854)]).then(a.bind(a,105271)));function G(e){let{board:t,hideToast:a}=e,i=(0,w.ZP)(),n=(0,P.Z)(),[r,l]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),u=()=>{a()};(0,$.Z)(()=>{setTimeout(()=>d(!0),100)});let{marginTop:h,opacity:p,pointerEvents:_,transform:g,transition:m,visibility:f}=(0,q.ZP)({deviceType:"desktop",hiding:!1,visible:o}),b=t.name,y=(0,K.jsxs)(c.xv,{children:[(0,K.jsxs)(c.xv,{weight:"bold",children:[" ",(0,I.nk)(i._('Invite people to your new board', 'postSavedPinBoardCreateCollabUpsell.title.1', 'Title to inform user that they have successfully saved a pin to their board'),{boardName:b})]}),(0,K.jsx)(c.xv,{children:i._('Get ideas from your favorite people', 'postSavedPinBoardCollabUpsell.message', 'Message to upsell invite collaborator feature')})]}),v=n.isAuth&&n.firstName&&(0,K.jsxs)(c.xu,{height:48,position:"relative",width:48,children:[(0,K.jsx)(c.xu,{position:"absolute",children:(0,K.jsx)(W.qE,{color:n.avatar_color_index,name:n.firstName,outline:!0,size:"sm",src:n.imageMediumUrl})}),(0,K.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{left:"25%",top:"25%"}},position:"absolute",rounding:4,children:(0,K.jsx)(c.Sj,{bgColor:"lightGray",hovered:!0,icon:"person-add",iconColor:"darkGray",size:"sm"})})]}),x=(0,K.jsx)(c.kC,{alignContent:"center",alignItems:"center",justifyContent:"start",children:(0,K.jsxs)(c.hE,{children:[(0,K.jsx)(c.zx,{accessibilityLabel:i._('Not now', 'postSavedPinBoardCollabUpsell.notNowLabel', 'Accessibility label for declining upsell'),color:"gray",onClick:u,text:i._('Not now', 'postSavedPinBoardCollabUpsell.notNowLabel', 'Label for decline button on upsell')}),(0,K.jsx)(c.zx,{accessibilityLabel:i._('Invite', 'postSavedPinBoardCollabUpsell.inviteFriendsLabel', 'Accessibility label for inviting friends on upsell'),color:"red",onClick:()=>{l(!0)},text:i._('Invite', 'postSavedPinBoardCollabUpsell.inviteFriendsLabel', 'Label for invite friends button on upsell')})]})});return(0,K.jsx)(c.mh,{zIndex:new c.H3([new c.Ry(1e3)]),children:r?(0,K.jsx)(V.Z,{children:(0,K.jsx)(J,{board:t,fromBoardCollabUpsell:!0,onDismiss:u})}):(0,K.jsx)(c.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{transform:g,transition:m,visibility:f,pointerEvents:_}},display:"flex",justifyContent:"center",marginBottom:5,marginTop:h,opacity:p,position:"fixed",width:"100%",children:(0,K.jsxs)(c.xu,{borderStyle:"shadow",color:(0,H.Yc)()?"elevationFloating":"default",direction:"column",display:"flex",paddingY:4,rounding:4,smDirection:"row",children:[(0,K.jsxs)(c.xu,{smDisplay:"flex",smMarginBottom:-3,smMarginTop:-3,width:"100%",wrap:!0,children:[(0,K.jsxs)(c.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",justifyContent:"center",padding:4,smDirection:"row",smPaddingY:3,children:[v,(0,K.jsx)(c.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",marginBottom:"auto",marginTop:"auto",smDisplay:"block",smMarginEnd:6,smMarginStart:2,children:(0,K.jsx)(c.xu,{maxWidth:648,children:y})})]}),x]}),(0,K.jsx)(c.hU,{accessibilityLabel:"cancel",icon:"cancel",iconColor:"darkGray",onClick:u,padding:4,size:"sm"})]})})})}var Y=a(552367),X=a(787776),Q=a(707360),ee=a(952e3),et=a(809851),ea=a(845401),ei=a(116965),en=a(488267),er=a(176436),el=a(312702),es=a(256772),eo=a(226003),ed=a(875202),ec=a(637019);let eu=(void 0!==i||(i=a(146139)).hash&&"03aa6b9cad1d5fb9b12a7c896ccdaffd"!==i.hash&&console.error("The definition of 'PinSaveRequestRepinWithSectionSuggestions_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),eh=(void 0!==n||(n=a(649014)).hash&&"6bd1eb83cfe5391288164b17cc5d85b7"!==n.hash&&console.error("The definition of 'PinSaveRequestRepinWithSectionSuggestions_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function ep(e){let{action:t,additionalCreateFields:a,boardWithSection:i,clientTrackingParams:n,children:r,onClose:l,pinKey:s,setCompletionPromise:o,shouldHideToast:d,shuffleAssetKey:c}=e,u=(0,k.Z)(eu,s),h=(0,k.Z)(eh,c);return(0,K.jsx)(ec.K,{action:t,additionalCreateFields:a,boardWithSection:i,clientTrackingParams:n,onClose:l,pinKey:u,setCompletionPromise:o,shouldShowToast:!d,showCreate:!0,shuffleAssetKey:h,urlPinInfo:null,children:e=>r(e)})}var e_=a(547496),eg=a(992114);function em(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let ef=(void 0!==r||(r=a(997784)).hash&&"00592a87c0eef346f4bdfb1d6ca06595"!==r.hash&&console.error("The definition of 'PinBetterSave_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),eb=(void 0!==l||(l=a(44377)).hash&&"2fd12704316ce3077575f9a0d9e31e84"!==l.hash&&console.error("The definition of 'PinBetterSave_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function ey({savedInfo:e,variant:t}){let a=(0,w.ZP)(),{closeupWithinMasonryEnabled:i}=(0,E.x4)(),n="closeup"===t,r="boardless"===e.type?a._('Profile', 'PinBetterSave.PinBetterSaveSavedStatus.savedTitle', 'Text indicating saved to your profile'):e.title??"";return(0,K.jsx)(c.rU,{href:e.url||"",onClick:({event:e})=>{e.stopPropagation()},children:(0,K.jsx)(c.xu,{alignItems:n?"center":void 0,dangerouslySetInlineStyle:{__style:{color:i?"#FFF":"#333"}},"data-test-id":"saved-board-title",display:n?"flex":"block",marginEnd:4*!!n,marginStart:+!!n,minHeight:n?52:void 0,children:(0,K.jsx)(c.xv,{align:n?"end":void 0,color:"cutout"===t||"media-viewer"===t?"light":"default",lineClamp:n?1:void 0,overflow:"breakAll",size:"300",weight:"bold",children:r})})})}class ev extends s.Component{constructor(...e){super(...e),em(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null,showBoardCollabUpsell:!1,hasItemSelected:!1}),em(this,"setBoardSaveCompletionPromise",e=>{let{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;let{board:{id:a,name:i,url:n}}=e,r={boardId:a,title:i,url:n};this.updateSelectedBoardOrSection(r),this.updateSavedState({...r,localPinId:e.id}),t&&(0,ee.Uz)(t.sensitivity)&&(0,et.ZP)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notices[0]}):this.handleRepinHide()})}),em(this,"updateSavedState",e=>{let{currentHistoryStack:t,location:a,save:i,searchQueryInvalidated:n,onSave:r,pin:l}=this.props,s=(0,R.mB)(a.search).q||(0,L._)(t);i({pinId:l.entityId,nodeId:l.__id,boardId:e.boardId??"",localPinId:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??"",type:e.type??"",url:e.url??""}),s&&n(s),r&&e.localPinId&&r()}),em(this,"updateSelectedBoardOrSection",e=>{let{selectBoardOrSection:t,pin:a}=this.props;t({pinId:a.entityId,nodeId:a.__id,boardId:e.boardId??"",localPinId:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??"",type:e.type??"",url:e.url??""})}),em(this,"updateSelectedItem",()=>{let{initialSelection:e,selectedItem:t}=this.props;!t&&e&&(this.updateSelectedBoardOrSection(e),this.setState({hasItemSelected:!0}))}),em(this,"dropdownRef",(0,s.createRef)()),em(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save({item:e})}),em(this,"handleBoardCreate",({title:e=""}={})=>{let{requireAuth:t,i18n:a}=this.props;if(t)return void t({loginModalHeader:(0,g.is)(a)});this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));let{onToggleFlyout:i}=this.props;i&&i(!0,!0)}),em(this,"handleBoardCreated",e=>{this.setState({createdBoard:e});let{toastManagerContext:t}=this.props;this.isViewerEligibleForBoardCollabUpsell(e)&&(this.setState({showBoardCollabUpsell:!0}),(0,T.M0)().setItem(p.zq,+new Date),setTimeout(()=>t.showOneToast(({hideToast:t})=>(0,K.jsx)(G,{board:e,hideToast:t})),4e3))}),em(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));let{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),em(this,"handleBoardDropdownClick",e=>{let{setAbortNoActionPlacementTimeout:t,pin:{entityId:a},viewParameter:i,viewType:n,clientTrackingParams:r,logContextEvent:l}=this.props;t(!0),e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(l({aux_data:{pin_id:a},component:13282,element:10960,event_type:101,object_id_str:a,view_parameter:i,view_type:n,clientTrackingParams:r}),this.showFlyout())}),em(this,"handleSaveClick",async e=>{this.props.onVisitButtonAnimate&&this.props.onVisitButtonAnimate();let{i18n:t,selectedItem:a,requireAuth:i}=this.props;if(i){e.stopPropagation(),i({loginModalHeader:(0,g.Bx)(t)});return}if(!a)return void this.handleBoardDropdownClick(e);e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.logClickEvent({isSaveClick:!0}),await this.save({item:a})}),em(this,"logClickEvent",({isSaveClick:e})=>{let{clientTrackingParams:t,pin:a,selectedItem:i,viewType:n,viewParameter:r,logContextEvent:l}=this.props,s=i?.score?JSON.stringify([i.score]):void 0;l({event_type:101,...n?{view_type:n}:Object.freeze({}),...r?{view_parameter:r}:Object.freeze({}),component:13282,element:36,object_id_str:i?.boardId,clientTrackingParams:t,aux_data:{board_id:i?.boardId,grid_index:D.Z,is_profile_save:i?.type==="boardless",is_undo:!e,pin_id:a.entityId,suggested_boards_score_list:s}})}),em(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),em(this,"handleEditSubmit",({boardId:e,sectionId:t,url:a,title:i})=>{let{savedInfo:n}=this.props,r=n?.localPinId;this.updateSavedState({localPinId:r||"",boardId:e,sectionId:t||"",url:a,title:i})}),em(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),em(this,"deleteSavedState",({isDisableToast:e,newPinId:t})=>{let{clientTrackingParams:a,i18n:i,onDelete:n,pin:r,toastManagerContext:l,unsave:s}=this.props;s({pinId:r.entityId,nodeId:r.__id}),t&&u.Z.create("PinResource",{id:t,client_tracking_params:a}).callDelete().then(()=>{e||l.showToast(({hideToast:e})=>(0,K.jsx)(S.Z,{dataTestId:"pin-better-save-removed-pin-toast",onHide:e,text:r.savedInfo?.boardId?i._('Removed from your board!', 'PinBetterSave.SavedPin.RemovedFromYourBoard', 'User removed their pin'):i._('Pin removed!', 'PinBetterSave.SavedPin.PinRemoved', 'User removed their pin')}))}),n&&n()}),em(this,"save",async({item:e,movedBoardTitle:t})=>{let{onClickCallback:a,requireAuth:i}=this.props;if(i)return void i();let{addNewPinToPinsFeed:n,i18n:r,isLimitedLogin:l,mostRecentBoard:s,pin:o,postRepinMoreIdeasUpsell:d,postRepinUpsellDisabled:c,save:u,setMostRecentBoard:h,toastManagerContext:p,showEmailVerificationReminderModal:_,mountAfterActionPlacement:g}=this.props;this.updateSavedState(e);let m=!!e.sectionId,f="boardless"===e.type;try{let{resource_response:{data:i}}=await this.getPinResource(e).callCreate({showError:!1}),l=e.url,{incrementBoardPinCount:_,updateUserPinCount:b,viewerUserId:y}=this.props;!c&&l&&!f&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:a})=>{if(!t)return!1;let{recentSaves:i,recentUpsell:n}=a;if(n[e])return!1;let r=i.findIndex(t=>t.boardId!==e);return(-1===r?i.length:r)+1>=3})({boardId:e.boardId??"",boardUrl:l,postRepinMoreIdeasUpsell:d})&&p.showToast(({hideToast:t})=>(0,K.jsx)(U,{boardId:e.boardId??"",boardName:e.title??"",boardUrl:l,onHide:t})),u({pinId:o.entityId,nodeId:o.__id,boardId:e.boardId??(i.board.id||""),localPinId:i.id?i.id:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??(i.board.title||""),type:e.type??"",url:e.url??(i.board.url||""),localPin:i}),this.props.onPinCreate&&this.props.onPinCreate({boardId:i.board.id,pinId:i.id}),_({boardId:e.boardId??"",sectionId:e.sectionId}),b(y);let v=e.sectionId?e.sectionId:e.boardId;f?(v=y,n(v,i.id,!1,f)):n(v??"",i.id,m,!1);let{id:x,images:P,board:k}=i,j=P["236x"];this.updateSavedState({...e,localPinId:x}),p.showToast(({hideToast:a})=>t?(0,K.jsx)(S.Z,{onHide:a,text:(0,I.nk)(r._('Moved to {{ boardName }}', 'PinBetterSave.SavedPin.MovedToBoard', 'User moved their pin. boardName: the board name where the pin is moved to'),{boardName:t}).join("")}):(0,K.jsx)(Y.Z,{boardName:(e.title||k.name)??"",boardUrl:e.url||k.url,isBoardlessPin:f,onHide:a,onUndo:()=>this.deleteSavedState({newPinId:x}),pinImageUrl:j.url})),g("Save",{is_promoted:o.isPromoted,pin_id:o.entityId,repin_id:x}),s&&e.boardId!==s.id&&!f&&h(e.boardId??"",e.title??"",e.url??""),"function"==typeof a&&a()}catch(e){(0,y.Z)(e,"api_error_code")===C.H9?_():l||v.Z.showError((0,y.Z)(e,"message_detail")||(0,y.Z)(e,"message")||""),this.resetPinSavedState()}}),em(this,"hideFlyout",(e=!1)=>{let{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){let{autoQuicksaveCallback:e,onMount:t,shouldAutoQuicksave:a}=this.props;this.updateSelectedItem(),t&&t(),a&&(this.save({item:{boardId:"",url:"/me/",title:"Profile",type:"boardless"}}),e?.())}componentDidUpdate(){this.state.hasItemSelected||this.updateSelectedItem(),this.props.saveToBoardFromPostDownloadUpsell&&(this.showFlyout(),this.props.setSaveToBoardFromPostDownloadUpsell?.(!1))}getPinResource(e){let{carouselData:t,clientTrackingParams:a,pin:i,getStringifiedCommerceAuxData:n,shuffleAsset:r}=this.props,l={carousel_slot_index:t&&t.index||0,clientTrackingParams:a,description:i.description||"",image_base64:i.imageBase64,is_buyable_pin:!1,is_promoted:i.isPromoted,is_removable:i.promotedIsRemovable,link:i.link,pin_id:i.entityId||"",title:i.title||"",...r?{shuffle_asset:r.entityId}:{},...e.boardId&&"boardless"!==e.type?{board_id:e.boardId}:null,...e.sectionId?{section:e.sectionId}:null,...n()};return u.Z.create("RepinResource",l)}showFlyout(){let{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}isViewerEligibleForBoardCollabUpsell(e){let{viewer:t}=this.props;if(t?.isAuth&&e){if(!(0,B.Z)(p.zq))return!1;let a=(0,T.M0)().getItem(p.zq)||"0",i=new Date,n=Number(a)<i.getTime()-6048e5,r=(t.boardCount??0)>=2&&(t.pinCount??0)>=3,l=!e.is_collaborative&&!!e.url&&e.url.split("/")[1]===t.username;return r&&l&&n}return!1}render(){let{boardResource:e,carouselData:t,clientTrackingParams:a,hideAlreadySavedMsg:i,onToggleModal:n,pin:r,renderPinSaveTooltip:l,renderSavedStatus:s,savedInfo:o,savedCutout:d,selectedItem:u,unselectedText:h,variant:p,viewParameter:_,hideDropdown:g,showSaveToProfile:m,shuffleAsset:f,nodeRef:y,surface:v}=this.props,{boardWithSection:S,showBoardFlyout:P,showRepinModal:k,sensitiveContentNotice:j,suggestedBoardTitle:w}=this.state,I=o||d,{entityId:C,imageSignature:A}=r,T=(0,K.jsx)(Z.xH,{boardResource:e,clientTrackingParams:a,hideAlreadySavedMsg:i,imageSignature:A,onBoardCreate:this.handleBoardCreate,onItemChosen:this.handleItemChosen,pinId:C,selectedItem:u,setBoardWithSection:this.setBoardWithSection,showSaveToProfile:m,surfaceOriginViewParameter:_}),B=()=>{this.logClickEvent({isSaveClick:!1}),this.deleteSavedState({newPinId:I?.localPinId??""})};return(0,K.jsx)(b.Z,{name:"PinBetterSave",children:(0,K.jsxs)(c.xu,{ref:y??void 0,"data-test-id":"pin-better-save-button",display:["closeup","media-viewer"].includes(p)?"flex":void 0,height:"closeup"===p||"media-viewer"===p?void 0:60,children:[I?.title?(0,K.jsx)(X.Z,{clientTrackingParams:a,currentCarouselIndex:t&&t.index,onDeleteSavedState:B,onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:I.localPinId,shouldUseLegoStyles:!0,surface:v,variant:p,viewParameter:_,children:s&&I&&s({savedInfo:I,variant:p})}):(0,K.jsx)(M,{dropdownRef:this.dropdownRef,hideDropdown:g,isSaved:!!I?.boardId,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:this.handleSaveClick,promotedIsLeadAd:r.promotedIsLeadAd,renderPinSaveTooltip:l,selectedItem:u,selectedTitle:u?.title,showBoardFlyout:P,surface:v,unselectedText:h,view:p}),(0,K.jsx)(ep,{action:"create",additionalCreateFields:{is_stl_pin:(r.shoppingFlags??[]).includes(2)},boardWithSection:S,clientTrackingParams:a,onClose:this.handleRepinHide,pinKey:r,setCompletionPromise:this.setBoardSaveCompletionPromise,shouldHideToast:this.state.showBoardCollabUpsell,shuffleAssetKey:f,urlPinInfo:null,children:({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:a,handleAbort:i,handleNewBoardAnimationCompletion:n,handleSaveToBoard:l,newPin:s,updateDescription:o,modalTitle:d,setModalTitle:c})=>(0,K.jsx)(e_.Z,{boardSavedTo:e,boardWithSection:S,dismissModal:t,displaySuccessAnimation:a,handleAbort:i,handleNewBoardAnimationCompletion:n,handleSaveToBoard:l,isInModal:!0,modalTitle:d,newPin:s,onBoardCreated:this.handleBoardCreated,pinKey:r,pwtAuxData:{pin_create_method:"repin"},sensitiveContentNotice:j,setModalTitle:c,shouldRenderContent:k,showCreate:!0,shuffleAssetKey:f,suggestedBoardTitle:w,updateDescription:o,urlPinInfo:null})}),P&&(0,K.jsx)(c.mh,{zIndex:new c.H3([Q.k]),children:(0,K.jsx)(c.J2,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!1,size:"xl",children:T})}),(0,K.jsx)(x.k6,{placementId:1000578})]})})}}em(ev,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t})=>(0,K.jsx)(ey,{savedInfo:e,variant:t})});let ex=(0,s.memo)(function({pinKey:e,shuffleAssetKey:t,surface:a,...i}){let{logContextEvent:n}=(0,_.u)(),r=(0,w.ZP)(),l=(0,d.TH)(),c=(0,k.Z)(ef,e),u=(0,k.Z)(eb,t),p=c.selectedItem,g=(0,A.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),b=(0,A.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:c.entityId,shortlist_length:1,num_shortlist_suggestions:1,suggestions_only:!0,min_confidence:.5}}),y=(0,ea.J)()?.onPinCreate,v=(0,z.dI)(),{showEmailVerificationReminderModal:S}=(0,f.H7)(),I=(0,P.Z)(),C=(0,o.I0)(),T=(0,o.v9)(({mostRecentBoard:e})=>e),{previous:B}=(0,j.ou)(),R=(0,j.aX)(),L=(0,o.v9)(({ui:e})=>e.postRepinMoreIdeasUpsell),D=c&&c.board?.layout!=="default",{initialSelection:Z}=i,M=Z?.title||"",O=!0,{showEnabledSaveBehavior:U}=(0,ei.ZP)(I.isAuth&&I.id||""),H=(0,x.cO)(),{setAbortNoActionPlacementTimeout:W}=(0,E.x4)(),q={boardId:"",title:r._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),type:"boardless",url:"/me/"},V=(0,m.Z)();if(!Z){let e=b&&b.data&&b.data[0];Z=c.board?.name&&!D&&I.isAuth&&c.board.owner?.entityId===I.id&&{title:c.board.name,boardId:c.board.entityId,url:c.board.url??""}||c.recommendationReason?.board&&{title:c.recommendationReason.board.name??"",boardId:c.recommendationReason.board.entityId??"",url:c.recommendationReason.board.url??""}||b&&b.isLoaded&&e&&{boardId:e.id,score:JSON.parse(e?.recommendation_reason??"{}").score,title:e.name,url:e.url}||b&&b.isLoaded&&!e&&U&&q||b&&b.isLoaded&&!e&&T&&{boardId:T.id,title:T.name,url:T.url}||void 0,M=b&&b.isLoaded?r._('Select', 'BetterSave label to pick a board from the list', 'BetterSave label to pick a board from the list'):"...",O=!1}Z?.url?.includes("_quick_saves")&&(Z=q);let $=(0,F.Z)(c),J=(0,s.useCallback)(e=>{let t="cutout"===i.variant?N.o4:N.a1;(0,eg.nP)(`web.closeup.media_viewer_stats.save.clicked_from.${i.variant}`),C(t(e))},[i.variant,C]),G=(0,s.useCallback)(e=>{let t="cutout"===i.variant?N.ti:N.jg;(0,eg.nP)(`web.closeup.media_viewer_stats.unsave.clicked_from.${i.variant}`),C(t(e))},[i.variant,C]),{triggerVisitButtonAnimation:Y}=(0,h.g)();return(0,K.jsx)(ev,{...i,addNewPinToPinsFeed:(e,t,a,i)=>{let n=a?ed.Z.BOARD_SECTION_PINS:ed.Z.BOARDFEED;i&&(n=ed.Z.BOARDLESS_PINS),C((0,el.vX)({feedId:e,feedType:n,itemIds:[t],itemType:"pin"}))},boardResource:g,carouselData:c&&c.carouselData,currentHistoryStack:R,getStringifiedCommerceAuxData:$,i18n:r,incrementBoardPinCount:({boardId:e,sectionId:t})=>C((0,en.Br)({boardId:e,sectionId:t,increment:1})),initialSelection:Z,isLimitedLogin:I.isLimitedLogin,location:l,logContextEvent:n,mostRecentBoard:T,mountAfterActionPlacement:H,onPinCreate:y,onVisitButtonAnimate:Y,pin:c,postRepinMoreIdeasUpsell:L,postRepinUpsellDisabled:O,previousHistory:B,renderPinSaveTooltip:i.renderPinSaveTooltip,requireAuth:V,save:J,savedCutout:c.savedCutout??void 0,savedInfo:c.savedInfo??void 0,searchQueryInvalidated:e=>C((0,er.sb)(e)),selectBoardOrSection:e=>{C(("cutout"===i.variant?N.b6:N.Vp)(e))},selectedItem:p??void 0,setAbortNoActionPlacementTimeout:W,setMostRecentBoard:(e,t,a)=>C((0,es.p)(e,t,a)),showEmailVerificationReminderModal:S,showSaveToProfile:U,shuffleAsset:u,surface:a,toastManagerContext:v,unsave:G,unselectedText:M,updateUserPinCount:e=>C((0,eo.JS)({userId:e,increment:1})),viewer:I,viewerUserId:I.isAuth?I.id:""})})},434196:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(20256),n=a(785893);let r=({image_url:e,naturalHeight:t,naturalWidth:a})=>(0,n.jsx)(i.xu,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,n.jsx)(i.zd,{height:48,rounding:2,wash:!0,width:48,children:(0,n.jsx)(i.Ee,{alt:"",naturalHeight:t,naturalWidth:a,src:e})})})},787776:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(20256),n=a(703717),r=a(785893);function l(e){let{clientTrackingParams:t,children:a,currentCarouselIndex:l,hidePinRepEditButton:s=!1,onDeleteSavedState:o,onEditSubmit:d,onToggleModal:c,pinId:u,variant:h,viewParameter:p,shouldUseLegoStyles:_,surface:g}=e;return(0,r.jsxs)(i.xu,{alignItems:"center",direction:"row",display:"flex",maxHeight:"100%",paddingX:"closeup"!==h||_?void 0:2,width:"closeup"===h?"100%":void 0,children:[a&&(0,r.jsx)(i.xu,{"data-test-id":"saved-info",flex:"grow",paddingX:1,children:a}),!s&&(0,r.jsx)(i.xu,{flex:"none",marginStart:"auto",paddingX:1,children:(0,r.jsx)(n.default,{carouselSlotCurrentIndex:l,clientTrackingParams:t,component:0,onDelete:o,onSubmit:d,onToggleModal:c,pinId:u,shouldUseLegoStyles:_,style:"pin"===h?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"},surface:g,useLegoStyles:"pin"===h,viewParameter:p})})]})}},829117:(e,t,a)=>{a.d(t,{Z:()=>l});let i={row:0,section:0},n={row:-1,section:-1},r=()=>void 0;class l{constructor(e){this.index={...i},this.sections=e,this.updateCallback=r,this.selectItem=r}getIndex(){return this.index}isAtStart(){let{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){let{row:e,section:t}=this.index,a=this.sections[t]||[];return this.sections.length===t+1&&a.length===e+1}next(){if(this.isAtEnd())return;let{row:e,section:t}=this.index;e===n.row&&t===n.section?this.index={...i}:this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;let{row:e,section:t}=this.index;if(e===n.row&&t===n.section)this.index={...i};else if(e>0)this.index.row-=1;else{let e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){let{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index={...n},this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},840119:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(667294),n=a(20256),r=a(328065),l=a(785893);function s(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends i.Component{constructor(e){super(e),s(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),s(this,"handleIndexUpdate",e=>{let{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),s(this,"handleSelectItem",e=>()=>{let{disabled:t,onSelectItem:a}=this.props;t||a(e)}),s(this,"handleMouseEnter",e=>()=>{let{disabled:t,indexManager:a}=this.props;t||a.updateIndex(e)}),s(this,"handleMouseLeave",()=>{let{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),s(this,"renderItems",(e,t)=>{let{renderItem:a}=this.props,{selectedIndex:i}=this.state,{row:r,section:s}=i||{},{customProps:o={},items:d,renderItem:c}=e,{isDisabled:u}=o,h=t===s,p=c||a;return p&&d.map((e,a)=>{let i=u?.(e)??!1,s=h&&a===r;return(0,l.jsx)(n.xu,{ref:!i&&s?this.setSelectedItemRef:null,"data-test-id":"board-selection",children:i?p({item:e,hovered:s,sectionProps:o}):(0,l.jsx)(n.iP,{fullWidth:!1,onMouseEnter:this.handleMouseEnter({section:t,row:a}),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:p({item:e,hovered:s,sectionProps:o})})},a)})}),s(this,"renderSections",()=>{let{renderSectionHeader:e,sections:t}=this.props;return t.map((t,a)=>(0,l.jsxs)(n.xu,{children:[e&&e(t,a),this.renderItems(t,a)]},a))});let{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){let{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){let e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;let a=e.getBoundingClientRect(),i=a.top,n=a.bottom,r=t.getBoundingClientRect(),l=r.top;n>=r.bottom?e.scrollIntoView(!1):i<=l&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){let{grow:e=!1,maxHeight:t,fetchMore:a}=this.props;return(0,l.jsx)(r.Z,{fetchMore:a,children:({setRef:a,onScroll:i})=>(0,l.jsx)(n.xu,{ref:e=>{this.containerRef=e,a(e)},flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:i,overflow:"auto",children:this.renderSections()})})}}},117588:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(20256),n=a(785893);let r={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function l(){return(0,n.jsx)(i.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,n.jsx)(i.xu,{dangerouslySetInlineStyle:r,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function s({disabled:e,name:t,onClick:a,size:r,submitting:s,text:o}){return(0,n.jsxs)(i.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[s&&(0,n.jsx)(l,{}),(0,n.jsx)(i.zx,{color:"red",disabled:e||s,name:t,onClick:a,size:r,text:o,type:"submit"})]})}},270872:(e,t,a)=>{a.d(t,{Z:()=>v});var i,n,r=a(667294);a(167912);var l=a(20256),s=a(78039),o=a(233846),d=a(51340),c=a(785893);function u(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let h=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],p=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),_=e=>Math.PI/180*e;class g extends r.PureComponent{constructor(...e){super(...e),u(this,"animationTimer",null),u(this,"canvasRemovalTimer",null),u(this,"containerRef",(0,r.createRef)()),u(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;let{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),a=2.5*e,i=document.createElement("canvas");return i.style.position="absolute",i.style.left=`${0-(a-t)/2}px`,i.style.top=`${0-(a-e)/2}px`,i.style.pointerEvents="none",i.style.width=`${a}px`,i.style.height=`${a}px`,i.style.overflow="visible",i.width=a,i.height=a,i}),u(this,"explode",()=>{let e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;let a=e.getContext("2d");t.prepend(e);let i=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(p(10,30)),color:h[Math.floor(Math.random()*h.length)],degree:Number(p(0,360).toFixed(1)),speed:Math.round(p(0,25)),friction:.9,opacity:Number(p(0,.5).toFixed(1)),yVel:0,gravity:.04})),n=(e,t,a,i)=>{window.requestAnimationFrame(()=>n(e,t,a,i)),t.clearRect(0,0,a,i),e.forEach(e=>{e.x+=e.speed*Math.cos(_(e.degree)),e.y+=e.speed*Math.sin(_(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};a&&n(i,a,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},(this.props.delay||0)+800)})}componentDidUpdate(e){let{delay:t,startAnimation:a}=this.props,{startAnimation:i}=e;a&&i!==a&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,c.jsx)(l.xu,{ref:this.containerRef,position:"relative",children:this.props.children})}}function m(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}u(g,"defaultProps",{delay:0});let f=(void 0!==i||(i=a(823559)).hash&&"18c3db3fbed169f50cffd214f66ddd8e"!==i.hash&&console.error("The definition of 'BoardCreateSuccess_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),b=(void 0!==n||(n=a(778194)).hash&&"f12c153dafdb70970e02775ea0db67c2"!==n.hash&&console.error("The definition of 'BoardCreateSuccess_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class y extends r.PureComponent{constructor(...e){super(...e),m(this,"state",{isInitialized:!1}),m(this,"containerRef",(0,r.createRef)()),m(this,"pinDestinationRef",(0,r.createRef)())}componentDidMount(){window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(){let{isInitialized:e}=this.state,{onDismiss:t}=this.props;e&&t&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(t,2600))}render(){let{pin:e,firstRepin:t,pinImageRef:a,selectedBoardName:i,shuffleAsset:n}=this.props,s=n?.cutoutImages??e?.imageSpec_236x,o=e?.description??"",u=s?.height??1,h=s?.width??1,p=s?.url??"",{isInitialized:_}=this.state,{mask:m,imageContainer:f}=((e,t,a,i)=>{let n,r,l={},s=a.current?.getBoundingClientRect(),o=t.current?.getBoundingClientRect(),d=i.current?.getBoundingClientRect();if(o&&s&&d){l={left:s.left-o.left,top:s.top-o.top};let e={x:d.left-s.left,y:d.top-s.top},t={x:(d.width-s.width)/2,y:(d.height-s.height)/2};n=`translate(${e.x}px, ${e.y}px)`,r=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:l.left,top:l.top,width:e?d?.width:s?.width,height:e?d?.height:s?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?n:"none",transform:e?n:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:s?.width,height:s?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?r:"none",transform:e?r:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(_,this.containerRef,a,this.pinDestinationRef);return(0,c.jsx)(r.Fragment,{children:(0,c.jsxs)(l.xu,{ref:this.containerRef,bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:[(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:m},maxHeight:335,overflow:"hidden",children:(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:f},children:(0,c.jsx)(l.Ee,{alt:o,naturalHeight:u,naturalWidth:h,src:p})})}),(0,c.jsx)(l.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!_,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1}},left:!0,position:"absolute",right:!0,top:!0,children:(0,c.jsxs)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:+!!_,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}},direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,c.jsx)(g,{delay:1250,startAnimation:_,children:(0,c.jsx)(l.zd,{height:180,rounding:2,width:270,children:(0,c.jsxs)(l.kC,{alignItems:"stretch",height:"100%",justifyContent:"start",width:"100%",children:[(0,c.jsx)(l.xu,{ref:this.pinDestinationRef,color:"transparent",flex:"grow",height:"100%",marginEnd:1}),(0,c.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:80,children:[(0,c.jsx)(l.xu,{color:"secondary",flex:"grow",marginBottom:1}),(0,c.jsx)(l.xu,{color:"secondary",flex:"grow"})]})]})})}),(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!!_,WebkitTransform:_?"translateY(0)":"translateY(20%)",transform:_?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"}},"data-test-id":"board-saved-heading",paddingX:2,children:(0,c.jsx)(l.X6,{align:"center",children:t?(0,d.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First board create confirmation message', 'First board create confirmation message'),{selectedBoardName:i??""}):(0,d.nk)(this.props.i18n._('You saved this Pin to {{ selectedBoardName }}!', 'Board create confirmation message', 'Board create confirmation message'),{selectedBoardName:i??""})})})]})})]})})}}function v({pinKey:e,shuffleAssetKey:t,...a}){let i=(0,o.ZP)(),n=(0,s.Z)(f,e),r=(0,s.Z)(b,t);return(0,c.jsx)(y,{...a,i18n:i,pin:n,shuffleAsset:r})}m(y,"defaultProps",{firstRepin:!1})},90040:(e,t,a)=>{a.d(t,{Z:()=>d});var i=a(20256),n=a(297934),r=a(233846),l=a(51340),s=a(785893);function o(e){let t=e?.imageMediumUrl??e?.image_medium_url??"",a=e?.avatar_color_index??void 0;return{name:e?.fullName??e?.full_name??"",color:a,src:"https://s.pinimg.com/images/user/default_75.png"===t?void 0:t}}function d({board:e,forceViewer:t,isCompact:a,ownerOnly:d}){let c=(0,r.ZP)(),u=(0,n.Z)(),h=d?[o(e?.owner)]:(function(e,t,a){let{collaborated_by_me:i,collaborating_users:n,owner:r}=e??{},l=n??[],s=[r];if(i||a){let e=l.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){let t=l.splice(e,1)[0];s.push(t)}else s.push(t)}return[...s,...[...l].sort((e,t)=>(e.full_name??"")>(t.full_name??"")?1:(t.full_name??"")>(e.full_name??"")?-1:0)]})(e,u,t).map(o),p=h.slice(0,3).map(e=>e.name),_="";switch(h.length){case 3:_=(0,l.Wc)(`${c._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')}`,{first:`${p[0]??""}`,second:`${p[1]??""}`,last:`${p[2]??""}`});break;case 2:_=(0,l.Wc)(`${c._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')}`,{first:`${p[0]??""}`,second:`${p[1]??""}`});break;default:_=p.join(", ")}let g=h.length>3?(0,l.Wc)(`, ${c.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', h.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars')}`,{userNames:_,leftCount:`${h.length-3}`}):(0,l.Wc)(`, ${c._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')}`,{userNames:_});return(0,s.jsx)(i.HE,{accessibilityLabel:g,collaborators:h,size:a?"xs":"sm"})}},492424:(e,t,a)=>{function i(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function n(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}a.d(t,{HG:()=>n,OQ:()=>r,hd:()=>i});let r=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t})},385750:(e,t,a)=>{a.d(t,{Z:()=>c});var i=a(578373),n=a(801393),r=a(829131),l=a(492424),s=a(312702),o=a(273381),d=a(875202);function c({boardId:e,sourceBoardId:t="",sourceSectionId:a="",name:c,nameSource:u,pinImport:h,initialPinIds:p=[]},_,g,m){let f=0;"RECOMMENDATION"===u?f=1:"EDITED_RECOMMENDATION"===u&&(f=2);let b={board_id:e,initial_pins:h&&!h.all?h.pinIds:p,name:c,name_source:f,...g?{orbac_subject_id:g}:Object.freeze({})};return c=>i.Z.create("BoardSectionResource",b).callCreate({showError:!1}).then(({resource_response:{data:i}})=>{m({event_type:7100,object_id_str:i.id}),c((0,l.hd)(e,i)),c((0,s.vX)({feedId:e,feedType:d.Z.BOARD_SECTIONS,itemIds:[i.id],itemType:"boardsection"})),c((0,r.Z)(e,"pin_count")),c((0,n.jB)("BoardSectionsRepinResource",{board_id:e,orbac_subject_id:g}));let{all:u,pinIds:p}=h||{all:!1,pinIds:[]};return u?new Promise((n,r)=>c((0,o.Z)({inverseSelection:!0,selectedPinIds:p,source:{boardId:t||e,sectionId:a||null},target:{boardId:e,sectionId:i.id}},_)).then(()=>n(i)).catch(r)):(p.length>0&&c((0,s.EX)({feedId:e,feedType:d.Z.BOARDFEED,itemIds:p,itemType:"pin"})),i)})}},829131:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(987775);function n(e,t,a){return(0,i.U)("BoardResource",{options:{board_id:e,field_set_key:t,...a?{orbac_subject_id:a}:{}}})}},827684:(e,t,a)=>{a.d(t,{A8:()=>v,CQ:()=>w,Cf:()=>b,DK:()=>g,GJ:()=>j,RZ:()=>x,SD:()=>S,aN:()=>I,h6:()=>f,tV:()=>k,xx:()=>y,yC:()=>C,zC:()=>m});var i,n,r,l,s,o,d,c=a(545007),u=a(167912),h=a(578373),p=a(19963),_=a(397657);let g=()=>{let e=(void 0!==i||(i=a(286383)).hash&&"850c5de9834cac0edfdd5652a78bffbf"!==i.hash&&console.error("The definition of 'collab_users_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),[t]=(0,u.useMutation)(e),{logContextEvent:n}=(0,p.u)();return async(e,a,i)=>{let r={boardId:e,collaboratorIds:a,message:i||""};return await new Promise((a,i)=>{t({variables:{...r},onCompleted:(t,r)=>{r&&i(r[0]),n({event_type:28,object_id_str:e}),a()},onError:e=>i(e)})})}},m=()=>{let e=(void 0!==n||(n=a(825668)).hash&&"de392a939a95d05f7ee889fe77a9e52d"!==n.hash&&console.error("The definition of 'collab_emails_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,p.u)();return async(e,a,n)=>{let r={boardId:e,emails:a,message:n||""};return await new Promise((a,n)=>{t({variables:{...r},onCompleted:(t,r)=>{r&&n(r[0]),i({event_type:28,object_id_str:e}),a()},onError:e=>n(e)})})}},f=()=>{let e=(void 0!==r||(r=a(693728)).hash&&"40ae8061007ba5f53a4570e43e4ca864"!==r.hash&&console.error("The definition of 'collab_ApproveInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,p.u)();return async(e,a)=>{let n={boardId:e,userId:a};return await new Promise((a,r)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&r(n[0]),i({event_type:32,object_id_str:e}),a(t)},onError:e=>r(e)})})}};function b(e,t){return async a=>{await (0,_.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"POST",data:{collaborator:t}}),a({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}})}}function y(e,t){return async a=>{await (0,_.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"DELETE",data:{collaborator:t}}),a({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}})}}let v=(e,t)=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e,collaboratingUser:t}}),x=()=>{let e=(void 0!==l||(l=a(599986)).hash&&"7005ce437a6a6ff33741ab44aa02cf61"!==l.hash&&console.error("The definition of 'collab_AcceptInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,p.u)();return async e=>{let a={boardId:e};return await new Promise((n,r)=>{t({variables:{...a},onCompleted:(t,a)=>{a&&r(a[0]),i({event_type:32,object_id_str:e}),n(t)},onError:e=>r(e)})})}},S=(e,t,a)=>async i=>{i(v(e,t)),(await h.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t.id}).callUpdate()).resource_response.error||a({event_type:32,object_id_str:e})};function P(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}let k=()=>{let e=(void 0!==s||(s=a(79558)).hash&&"9aa22a7713214239538142ad2c957cc3"!==s.hash&&console.error("The definition of 'collab_RequestToJoin_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),[t]=(0,u.useMutation)(e),i=(0,c.I0)();return async e=>{let a={boardId:e};return await new Promise((n,r)=>{t({variables:{...a},onCompleted:(t,a)=>{a&&(i(P(e,!1)),r(a[0])),i(P(e,!0)),n(t)},onError:t=>{i(P(e,!1)),r(t)}})})}};function j(e,t){return a=>{(0,_.Z)({url:`/v3/boards/${e}/collaborators/request/${t}/`,method:"DELETE",data:{board:e,user:t}}).catch(()=>{a(P(e,!0))}),a(P(e,!1))}}let w=()=>{let e=(void 0!==o||(o=a(791701)).hash&&"c62e5df78917dd238b70f366f358d487"!==o.hash&&console.error("The definition of 'collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,p.u)();return async(e,a,n)=>{let r={boardId:e,userId:a,ban:n||!1};return await new Promise((a,n)=>{t({variables:{...r},onCompleted:(t,r)=>{r&&n(r[0]),i({event_type:29,object_id_str:e}),a(t)},onError:e=>n(e)})})}},I=()=>{let e=(void 0!==d||(d=a(926331)).hash&&"2c3e1508650962adfff1171e950fa419"!==d.hash&&console.error("The definition of 'collab_RemoveBoardCollaborators_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),[t]=(0,u.useMutation)(e),{logContextEvent:i}=(0,p.u)();return async(e,a)=>{let n={board:e,collaboratorIds:[a]};return await new Promise((a,r)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&r(n[0]),i({event_type:29,object_id_str:e}),a(t)},onError:e=>r(e)})})}},C=()=>{let e=w(),t=I();return(a,i,n)=>async()=>{let{invited_user:i,status:r,board:{id:l}}=a;i&&("accepted"===r?await t(l,i.id):await e(l,i.id,n))}}},256772:(e,t,a)=>{a.d(t,{p:()=>i});let i=(e,t,a)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:a}})},273381:(e,t,a)=>{a.d(t,{Z:()=>_,S:()=>p});var i=a(578373),n=a(829131),r=a(808030),l=a(312702),s=a(28755),o=a(875202),d=a(795209);let c=e=>t=>{d.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(t,e))},u=e=>(0,l.N8)(e.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,e.sectionId||e.boardId);function h(e,t){let{source:a,target:i}=e;i.boardId!==a.boardId?(t((0,n.Z)(a.boardId,"pin_count")),t((0,n.Z)(i.boardId,"pin_count"))):a.sectionId&&i.sectionId||t((0,n.Z)(i.boardId,"pin_count")),a.sectionId&&t((0,r.Z)(a.sectionId)),i.sectionId&&t((0,r.Z)(i.sectionId))}function p(e){return t=>{let{selectedPinIds:a,source:i,target:n}=e;t((0,l.EX)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,itemIds:a,itemType:"pin"})),t((0,l.vX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,itemIds:a,itemType:"pin"})),a.forEach(e=>{t((0,s.Vp)({pinId:e,boardId:n.boardId,sectionId:n.sectionId||void 0,title:n.name||""}))}),h(e,t)}}function _(e,t){return a=>{let{selectedPinIds:n,target:r}=e;return n.forEach(e=>{a((0,s.Vp)({pinId:e,boardId:r.boardId,sectionId:r.sectionId||void 0,title:r.name||""}))}),(function(e,t,a){let{inverseSelection:n,selectedPinIds:r,source:s,target:d,orbacSubjectId:h}=e;if(s.boardId===d.boardId&&(s.sectionId||null)===(d.sectionId||null))return Promise.reject();if(n){let e={board_id:s.boardId,new_board_id:d.boardId,old_section_id:s.sectionId||void 0,new_section_id:d.sectionId||void 0,pin_ids:r,orbac_subject_id:h};return i.Z.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(u(s)),t(u(d))])).catch(c(a))}{let e=(e,a)=>{t((0,l.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,itemIds:r,itemType:"pin"})),t((0,l.vX)({feedId:a.sectionId||a.boardId,feedType:a.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,itemIds:r,itemType:"pin"}))};e(s,d);let n=()=>e(d,s);if(d.boardId===s.boardId)if(d.sectionId){let e={section_id:d.sectionId,pins:r,orbac_subject_id:h};return i.Z.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),c(a)(e)})}else{let e={section_id:s.sectionId,pins:r,orbac_subject_id:h};return i.Z.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),c(a)(e)})}{let e={board_id:d.boardId,section_id:d.sectionId||void 0,pin_ids:r,orbac_subject_id:h};return i.Z.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),c(a)(e)})}}})(e,a,t).then(()=>h(e,a))}}},576118:(e,t,a)=>{a.d(t,{Z:()=>p});var i=a(667294),n=a(278229),r=a(95460),l=a(297934),s=a(113474),o=a(827491),d=a(488879),c=a(636113),u=a(785893);let h=(0,i.lazy)(()=>Promise.all([a.e(97270),a.e(8534),a.e(59108),a.e(37435)]).then(a.bind(a,892979)));function p(e){let t=(0,o.Z)(),a=(0,l.Z)(),p=(0,d.lJ)(a,t),_=(0,s.Z)({name:"PinResource",options:(0,c.Tr)(e.pinId,!0,p)});return(0,u.jsx)(r.Z,{name:"SafeSuspense_EditPinModalLoader_EditPinModal",children:(0,u.jsx)(i.Suspense,{children:_?.data?(0,u.jsx)(n.A,{pinKey:{type:"deprecated",data:_.data},children:(0,u.jsx)(h,{...e,pin:_.data,pinIsLoaded:_.isLoaded})}):null})})}},197098:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(545007),n=a(19963),r=a(135376);let l=({pinId:e,carouselSlotCurrentIndexProp:t,component:a,setShowEditModal:l})=>{let s,{logContextEvent:o}=(0,n.u)(),d=(0,r.Z)(),c=(0,i.v9)(({pins:e})=>e),{carousel_data:u}=c&&e&&c[e]||{},{index:h}=u||{};return void 0!==t&&(s=h||t||0),{onClick:({event:e})=>{if(d)return void d();e.stopPropagation(),o({event_type:101,element:3,...a?{component:a}:Object.freeze({})}),l(!0)},carouselSlotCurrentIndex:s}}},636113:(e,t,a)=>{function i(e){return!!(e&&e.trim().length)}function n(e,t){let a=i(e),n=i(t);return(a||n)&&e!==t}a.d(t,{Tr:()=>r,aU:()=>n});let r=(e,t,a)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...a?{orbac_subject_id:a}:Object.freeze({})})},128218:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(667294),n=a(20256),r=a(785893);function l(e){let{accessibilityClearButtonLabel:t,accessibilityLabel:a,focused:l,id:s,onBlur:o,onChange:d,onFocus:c,placeholder:u,value:h,size:p="lg"}=e,_=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(l){let e=_.current;window.requestAnimationFrame(()=>{let t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[l]),(0,r.jsx)(n.xu,{ref:_,children:(0,r.jsx)(n.Um,{accessibilityClearButtonLabel:t,accessibilityLabel:a,id:s,onBlur:o,onChange:d,onFocus:c,placeholder:u,size:p,value:h})})}},224248:(e,t,a)=>{a.d(t,{W:()=>c,Z:()=>u});var i=a(20256),n=a(69401),r=a(233846),l=a(647937),s=a(434196),o=a(208053),d=a(785893);function c(e,t=""){let a=e&&e.length>1?RegExp(e,"i"):"";return e&&e.length>1?t.split(a).reduce((a,i)=>{if(a.length>0&&e&&e.length){let n=t.toLowerCase().indexOf(e.toLowerCase());return a.concat(t.substring(n,n+e.length),i)}return[i]},[]):t}let u=function(e){let t=(0,r.ZP)(),{disabled:a,item:u,isSection:h,isSelectMode:p,isWithinSectionPicker:_,saveState:g,searchQuery:m,selected:f}=e,b=h?null:u,y=h?u:null,v=y&&y.title||b&&b.name||"",x="",S=!1,P="",k=0;b&&({image_cover_url:x,is_collaborative:S,privacy:P,section_count:k=0}=b);let j=c(m,v),w=P===n.ZP.BoardPrivacy.SECRET,I=!a&&(f||!!g),C=!_&&"number"==typeof k&&k>0,A="number"==typeof k&&k>0?"boardWithSection":"boardWithoutSection",T=p?t._('Select', 'Board select button label', 'Board select button label'):t._('Save', 'Pin save button label', 'Pin save button label');return(0,d.jsxs)(i.xu,{alignItems:"center",color:I?"secondary":"default","data-test-id":A,display:"flex",height:64,marginEnd:2,marginStart:2,marginTop:1,padding:2,rounding:3,children:[b&&(0,d.jsx)(i.xu,{color:"secondary",flex:"none",height:48,marginEnd:2,overflow:"hidden",rounding:2,width:48,children:x&&(0,d.jsx)(i.Ee,{alt:t._('Board cover image', 'boardPickerRow.image.altText', 'alt text for a board cover image'),fit:"cover",naturalHeight:1,naturalWidth:1,src:x})}),y&&!!y.preview_pins?.length&&(0,d.jsx)(s.Z,{image_url:y.preview_pins[0].image_square_url??"",naturalHeight:y.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:y.preview_pins[0].image_square_size_pixels?.width??1}),(0,d.jsxs)(i.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,d.jsx)(i.xv,{color:a?"subtle":"default",lineClamp:1,size:"300",weight:"bold",children:j}),(C||!I)&&(0,d.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[w&&(0,d.jsx)(o.Z,{type:"secret"}),S&&(0,d.jsx)(l.Z,{board:b,showCollaborativeIcon:S,useLegoLayout:!0}),C&&(0,d.jsx)(o.Z,{type:"sections"})]}),!C&&I&&!g&&(0,d.jsx)(i.xu,{alignItems:"center",color:"primary","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:(0,d.jsx)(i.xv,{color:"inverse",overflow:"normal",size:"300",weight:"bold",children:T})}),!C&&I&&"loading"===g&&(0,d.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,d.jsx)(i.xH,{accessibilityLabel:t._('Saving', 'Accessibility label for saving a pin to a board', 'Accessibility label for saving a pin to a board'),show:!0})})]})]})}},208053:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(20256),n=a(233846),r=a(785893);let l=function({type:e}){let t=(0,n.ZP)(),a={group:{accessibilityLabel:t._('group board', 'Board picker group board icon', 'Board picker group board icon'),icon:"people"},protected:{accessibilityLabel:t._('protected board', 'Board picker protected board icon', 'Board picker protected board icon'),icon:"protect"},secret:{accessibilityLabel:t._('secret board', 'Board picker secret board icon', 'Board picker secret board icon'),icon:"lock"},sections:{accessibilityLabel:t._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:t._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-down"}}[e],l="sections"===e||"sectionsInline"===e;return(0,r.jsx)(i.xu,{marginStart:+!!l,children:(0,r.jsx)(i.xu,{marginStart:2*!!l,children:"sections"===e||"sectionsInline"===e?(0,r.jsx)(i.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:"12"}):(0,r.jsx)(i.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:16})})})}},818539:(e,t,a)=>{a.d(t,{Z:()=>u});var i=a(667294),n=a(20256),r=a(19963),l=a(233846),s=a(113474),o=a(785893);function d(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends i.Component{constructor(...e){super(...e),d(this,"state",{isHovering:!1}),d(this,"onHover",()=>{this.setState({isHovering:!0})}),d(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){let{name:e,selected:t,image:a,inFlyoutExp:i}=this.props;return i?(0,o.jsxs)(n.xu,{alignItems:"center",color:this.state.isHovering?"secondary":"transparent",direction:"row",display:"flex",onMouseOut:this.offHover,onMouseOver:this.onHover,paddingX:4,paddingY:2,children:[(0,o.jsx)(n.xu,{children:(0,o.jsx)(n.zd,{height:40,rounding:2,width:40,children:this.state.isHovering&&a&&a.url?(0,o.jsx)(n.Ee,{alt:"",color:"",fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,src:a.url}):(0,o.jsx)(n.xu,{color:"secondary",height:40,width:40})})}),(0,o.jsx)(n.xu,{padding:2,children:(0,o.jsx)(n.X6,{size:"400",children:e})})]}):(0,o.jsxs)(n.xu,{alignItems:"center",color:t?"secondary":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,o.jsx)(n.xu,{children:(0,o.jsx)(n.JO,{accessibilityLabel:"",color:t?"default":"subtle",icon:"add"})}),(0,o.jsx)(n.xu,{marginStart:3,children:(0,o.jsx)(n.xv,{color:t?"default":"subtle",weight:"bold",children:e})})]})}}let u=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:a,image:d,minHeight:u,onBoardSelected:h})=>{let{logContextEvent:p}=(0,r.u)(),_=(0,l.ZP)(),[g,m]=(0,i.useState)(-1),{data:f=[],isLoaded:b}=(0,s.Z)({name:"ApiResource",options:{url:`/v3/pins/${String(a)}/board_title_suggestions/`,pin_id:a}}),y=(0,i.useMemo)(()=>f&&f.length?f.map(e=>e.title):[],[f]),v=()=>{m(-1)},x=(t,a)=>{let i=g===a;return(0,o.jsx)("li",{children:(0,o.jsx)(n.iP,{onMouseEnter:()=>{m(a)},onMouseLeave:v,onTap:()=>{h(y[a],!1),p({event_type:101,component:13025,element:23})},children:(0,o.jsx)(c,{image:d,inFlyoutExp:e,name:t,selected:i})})},a)};return b?y&&y.length?e?(0,o.jsx)(n.xu,{children:(0,o.jsx)("ul",{children:y.map(x)})}):t?(0,o.jsxs)(n.xu,{children:[(0,o.jsx)(n.xu,{marginBottom:3,marginStart:6,marginTop:5,children:(0,o.jsx)(n.xv,{children:_._('Suggested board names', 'text above suggested board names list', 'text above suggested board names list')})}),(0,o.jsx)("ul",{children:y.map(x)})]}):(0,o.jsxs)(n.xu,{children:[(0,o.jsx)(n.xu,{marginTop:2,paddingX:5,children:(0,o.jsx)(n.xv,{children:_._('Suggested board names', ' - ', ' -- ')})}),(0,o.jsx)("ul",{children:y.map(x)})]}):null:(0,o.jsx)(n.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:u||"",children:(0,o.jsx)(n.xH,{accessibilityLabel:_._('Loading board suggestions', 'Accesibility label for loading board suggestions', 'Accesibility label for loading board suggestions'),show:!0})})}},179096:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(20256),n=a(233846),r=a(143759),l=a(785893);function s(e){let t=(0,n.ZP)(),{buttonLabel:a,hasHoverState:s,name:o,onClick:d}=e,{isHovering:c,hoverHandlers:u}=(0,r.Z)(),h=o||a||t._('Create board', ' - ', ' -- ');return(0,l.jsx)(i.iP,{onMouseEnter:u.onMouseOver,onMouseLeave:u.onMouseLeave,onTap:d,children:(0,l.jsxs)(i.xu,{alignItems:"center",color:s&&c?"secondary":"default",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,l.jsx)(i.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},marginEnd:2,rounding:2,children:(0,l.jsx)(i.JO,{accessibilityLabel:"",color:"default",icon:"add",size:20})}),o?(0,l.jsx)(i.xu,{margin:1,children:(0,l.jsxs)(i.xv,{inline:!0,overflow:"normal",children:[" ",t._('Create: ', ' - ', ' -- ')," "]})}):null,(0,l.jsxs)(i.xv,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",h," "]})]})})}},594457:(e,t,a)=>{a.d(t,{Z:()=>f});var i=a(667294),n=a(545007),r=a(20256),l=a(219308),s=a(297934),o=a(233846),d=a(653810),c=a(827491),u=a(488879),h=a(117588),p=a(385750),_=a(785893);function g(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends i.Component{constructor(e){super(e),g(this,"onCreateSection",()=>{let{board:e,sourceBoard:t,sourceSection:a,dispatch:i,completeCreateSectionAction:n,pinImport:r,viewer:l,orbacActingAs:s,logContextEvent:o}=this.props,d=(0,u.lJ)(l,s);return this.setState({isSaving:!0}),i((0,p.Z)({boardId:e.id,sourceBoardId:t&&t.id,sourceSectionId:a&&a.id,name:this.state.inputName.trim(),pinImport:r},this.props.i18n,d,o)).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),g(this,"handleKeyDown",({event:e})=>{let{createError:t,inputName:a}=this.state;[d.Z.ENTER,d.Z.NUMPAD_ENTER].includes(e.which)&&!t&&a.trim()&&this.onCreateSection()}),g(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),g(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){let{createError:a,inputRef:i}=this.state;i&&(!t.inputRef||a)&&i.focus()}render(){let{showTitle:e,positionRelative:t}=this.props,{createError:a,inputName:i,isSaving:n}=this.state,l=!!i.trim()&&!a;return(0,_.jsxs)(r.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:t?"relative":"absolute",right:!0,rounding:2,top:!0,width:"100%",children:[e&&(0,_.jsx)(r.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,_.jsx)(r.X6,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,_.jsxs)(r.xu,{padding:4,children:[(0,_.jsx)(r.xu,{marginBottom:2,children:(0,_.jsx)(r.__,{htmlFor:"sectionEditName",children:(0,_.jsx)(r.xv,{color:a?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,_.jsx)(r.xu,{children:(0,_.jsx)(r.xu,{ref:this.handleInputRef,children:(0,_.jsx)(r.nv,{errorMessage:a||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:i})})})]}),(0,_.jsx)(r.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,_.jsx)(r.xu,{padding:4,children:(0,_.jsx)(r.kC,{alignItems:"stretch",justifyContent:"end",children:(0,_.jsx)(h.Z,{disabled:!l||n,onClick:this.onCreateSection,submitting:n,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}}let f=function(e){let t=(0,n.I0)(),a=(0,o.ZP)(),i=(0,s.Z)(),r=(0,c.Z)();return(0,_.jsx)(m,{...e,dispatch:t,i18n:a,logContextEvent:(0,l.Z)(),orbacActingAs:r,viewer:i})}},838462:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(20256),n=a(655057),r=a(785893);function l({url:e,description:t,color:a}){return a=a||"#8fa7bf",(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:a}},height:216,rounding:2,width:"100%",children:(0,r.jsxs)(i.xu,{maxHeight:200,overflow:"hidden",padding:4,children:[e&&(0,r.jsx)(i.xu,{marginBottom:2,children:(0,r.jsx)(i.xv,{color:"inverse",size:"100",children:(0,n.Z)(e).hostname||e})}),(0,r.jsx)(i.xu,{maxHeight:144,children:(0,r.jsx)(i.xv,{color:"inverse",overflow:"normal",weight:"bold",children:t})})]})})}},486738:(e,t,a)=>{a.d(t,{Z:()=>_});var i=a(667294),n=a(20256),r=a(397657),l=a(41086),s=a(233846),o=a(51340),d=a(653810),c=a(47829),u=a(785893);function h(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends i.Component{constructor(...e){super(...e),h(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),h(this,"onDismiss",()=>{}),h(this,"mounted",!1),h(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),h(this,"handleKeyDown",e=>{e.keyCode===d.Z.UP?this.handlePrevHashtag(e):e.keyCode===d.Z.DOWN?this.handleNextHashtag(e):e.keyCode===d.Z.ESCAPE?this.handleClose(e):e.keyCode===d.Z.ENTER&&this.handleSubmit(e)}),h(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),h(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),h(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),h(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),h(this,"callResource",e=>{let{makeCancelablePromise:t}=this.props;t((0,r.Z)({url:"/v3/search/autocomplete/",data:{q:e,show_pin_count:!0}}),"typeahead").then(e=>{if(!this.mounted)return;let{data:t}=e.resource_response;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){let{recommendations:e,resourceLoaded:t,selectedIndex:a}=this.state,{anchor:i,idealDirection:r}=this.props,s=e.filter(e=>e.query),d="flyout_"+s.length;return t&&s.length>0?(0,u.jsx)(n.J2,{anchor:i,idealDirection:r||"down",onDismiss:this.onDismiss,size:"sm",children:(0,u.jsx)(n.xu,{width:"100%",zIndex:new n.Ry(3),children:s.length>0?s.map((e,t)=>(0,u.jsx)(n.iP,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:(0,u.jsxs)(n.xu,{alignItems:"center",color:t===a?"secondary":"transparent",display:"flex",justifyContent:"between",padding:1,children:[(0,u.jsx)(n.xu,{flex:"grow",children:(0,u.jsx)(n.xv,{inline:!0,size:"200",weight:"bold",children:e.query})}),(0,u.jsx)(n.xu,{flex:"none",children:(0,u.jsx)(n.xv,{inline:!0,size:"100",children:(0,o.nk)(this.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(e.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,u.jsx)(l.Z,{value:Number(e.pin_count)},"pinCount")})})})]})},e.query)):null})},d):null}}function _(e){let t=(0,s.ZP)(),a=(0,c.Z)();return(0,u.jsx)(p,{...e,i18n:t,makeCancelablePromise:a})}},350739:(e,t,a)=>{a.d(t,{Z:()=>C});var i,n,r,l,s,o=a(667294);a(167912);var d=a(20256),c=a(19963),u=a(78039),h=a(838462),p=a(509936),_=a(380222),g=a(233846),m=a(51340),f=a(113474),b=a(785893);let y=(void 0!==i||(i=a(807089)).hash&&"3caf9424c2af74d2b11a6ea682b57d1b"!==i.hash&&console.error("The definition of 'AlreadyPinnedCheck_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),v=(void 0!==n||(n=a(144434)).hash&&"6bb1a587f71f85424aa51845831862d4"!==n.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),x=(void 0!==r||(r=a(485701)).hash&&"0b5f077c08e31de36594b6918e128d12"!==r.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function S({pinKey:e}){let t=(0,g.ZP)(),a=(0,u.Z)(y,e),i="GraphQL"===(0,p.o)(e),n=(0,_.Z)({strategy:i?"GRAPHQL":"LEGACY",query:x,variables:{pinId:a.entityId},options:{fetchPolicy:"network-only"},useGetLegacyResource:({pinId:e})=>{let t=(0,f.Z)({name:"ApiResource",options:{url:`/v3/pins/${e}/`,field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0});return{data:t.data,refresh:t.refresh}}}),r=n?.v3GetPinQuery?.__typename==="V3GetPin"?n.v3GetPinQuery.data:null,l=(0,u.Z)(v,r);return l&&l.pinnedToBoard&&"quick_creates"!==l.pinnedToBoard.layout?(0,b.jsxs)(d.xu,{children:[(0,b.jsx)(d.xu,{color:"errorBase","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:(0,b.jsx)(d.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:(0,m.nk)(t._('Psst! You already saved this Pin to {{ board_name }} ', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:(l.pinnedToBoard||{}).name}).join(" ")})}),(0,b.jsx)(d.xu,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,b.jsx)(d.JO,{accessibilityLabel:"",color:"error",icon:"heart",size:26})})]}):null}var P=a(486738);function k(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let j=(void 0!==l||(l=a(320857)).hash&&"d928a4e793c8e81567357b1faa71d2e3"!==l.hash&&console.error("The definition of 'PinPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),w=(void 0!==s||(s=a(165935)).hash&&"1a4583782792fbfe92015cb2dbe50f70"!==s.hash&&console.error("The definition of 'PinPane_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);class I extends o.Component{constructor(...e){super(...e),k(this,"state",{flyoutCursorIndex:-1,description:this.props.pin?.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),k(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),k(this,"handleHashtagAddition",e=>{let{pin:t}=this.props;this.props.logContextEvent({event_type:101,component:208,element:10249,object_id_str:t?.entityId,aux_data:{hashtags:e}});let a=this.state.flyoutCursorIndex,i=Number(a+this.state.hashtagQuery.length),n=this.state.description.slice(0,a)+e+" "+this.state.description.slice(i);this.updateDescription(n),this.setState({description:n,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})})}render(){let{color:e,isFirstPin:t,pin:a,pinImageRef:i,shuffleAsset:n}=this.props,{editing:r,flyoutOpened:l,hashtagQuery:s,isHashtagFlyoutOpen:o}=this.state,c=n?.cutoutImages??a?.imageSpec_236x,u=c?.url||a?.imageBase64||this.props.urlPinInfo?.imageUrl,p=this.state.description||this.props.urlPinInfo?.description||"",_=a?.link||this.props.urlPinInfo?.link;return(0,b.jsxs)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:l&&r?{transform:"translateY(-75px)"}:{}},display:"flex",justifyContent:"center",position:"relative",width:t?"50%":"",children:[(0,b.jsxs)(d.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[a?.entityId&&!n&&(0,b.jsx)(S,{pinKey:a}),(0,b.jsx)(d.xu,{paddingY:9*!!t,width:240,children:(0,b.jsx)(d.xu,{ref:i,maxHeight:l&&r?220:335,overflow:"hidden",rounding:4,children:u?(0,b.jsx)(d.Ee,{alt:p,naturalHeight:c?.height||1,naturalWidth:c?.width||1,src:u}):!!_&&(0,b.jsx)(h.Z,{color:e||"",description:p,url:_})})})]}),this.anchor&&o?(0,b.jsx)(P.Z,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,query:s}):null]})}}function C({pinKey:e,shuffleAssetKey:t,...a}){let{logContextEvent:i}=(0,c.u)(),n=(0,u.Z)(j,e),r=(0,u.Z)(w,t);return(0,b.jsx)(I,{...a,logContextEvent:i,pin:n,shuffleAsset:r})}},637019:(e,t,a)=>{a.d(t,{K:()=>Z});var i,n,r=a(667294),l=a(545007);a(167912);var s=a(616550),o=a(578373),d=a(19963),c=a(795209),u=a(896798),h=a(778622),p=a(231333),_=a(297934),g=a(78039),m=a(468318),f=a(233846),b=a(987775),y=a(339908),v=a(491962),x=a(901948),S=a(974159),P=a(670380),k=a(845401),j=a(488267),w=a(62861),I=a(226003),C=a(20256);a(69401);var A=a(51340),T=a(257159),B=a(785893),z=a(143906);function R(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let F=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,E=(void 0!==i||(i=a(486295)).hash&&"bfa270bf437ef1e9195cafe07b0b3631"!==i.hash&&console.error("The definition of 'PinSaveRequest_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),L=(void 0!==n||(n=a(850951)).hash&&"58c24e25a76e7a1c4533f3b07f490517"!==n.hash&&console.error("The definition of 'PinSaveRequest_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class D extends r.Component{constructor(...e){super(...e),R(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,!!this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||this.props.urlPinInfo?.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),R(this,"unmounted",!1),R(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),R(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),R(this,"close",()=>{let{onClose:e}=this.props;e&&e(),this.props.logContextEvent({event_type:2502,component:5,element:610})}),R(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),R(this,"getPinResource",(e,t,a)=>{let{color:i,clientTrackingParams:n,pin:r,method:l,guid:s,additionalCreateFields:d,advertiser_id:c,urlPinInfo:u,shuffleAsset:h}=this.props,p=r?.entityId?"RepinResource":"PinResource",_=r?.imageUrl||u?.imageUrl,g=r?.link||u?.link,m=!r?.entityId&&_?(0,v.Z)(_,g):r?.imageSpec_orig?.url||"",f={...d,board_id:t||"",color:i||"",clientTrackingParams:(0,P.Z)(n,r?.trackingParams),description:this.state.pinDescription,guid:s||"",link:g,image_base64:r?.imageBase64??void 0,image_url:m,is_buyable_pin:!1,is_removable:r?.promotedIsRemovable??void 0,media_upload_id:r?.mediaUploadId??void 0,method:l||"",pin_id:r?.entityId||"",section:a,title:r?.title||"",...c?{advertiser_id:c}:Object.freeze({}),...h?{shuffle_asset:h.entityId}:{}};if(!e){let{facebook:e,twitter:t}=this.state.sharing;f.share_facebook=e,f.share_twitter=t}return o.Z.create(p,f)}),R(this,"triggerPubSubs",e=>{this.props.onPinCreate&&this.props.onPinCreate({boardId:e.board.id,pinId:e.id})}),R(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((a,i)=>{e.then(e=>t?i({isCanceled:!0}):a(e)),e.catch(e=>t?i({isCanceled:!0}):i(e))}),cancel(){t=!0}}}),R(this,"handleLogToastClick",()=>{this.props.logContextEvent({event_type:101,component:20,view_type:52})}),R(this,"showBoardSavedToast",(e,t)=>{let{toastManagerContext:a,i18n:i}=this.props;a.showToast(({hideToast:a})=>{var n;return(0,B.jsx)(p.Z,{duration:z.A,href:t?`${e.url??""}${t.slug??""}`:e.url,imageUrl:e.image_cover_url??"",onClick:this.handleLogToastClick,onHide:a,text:(n=e.name,t?(0,T.Z)(i._('Saved to {{sectionName}} in {{boardName}}', 'Toast for successfully saving to a section within a board', 'Toast for successfully saving to a section within a board'),{sectionName:t.title??"",boardName:n??""}):(0,B.jsx)(C.xv,{children:(0,A.nk)(i._('Saved to {{ boardName }}', 'Libs.PinToBoard.NewBoardToast', 'boardName:Name of the new board created to add the saved pin'),{boardName:(0,B.jsx)(C.xv,{weight:"bold",children:n})})}))})})}),R(this,"dismissModal",()=>{let{resolve:e,newPin:t}=this.state;e&&e(t)}),R(this,"handleBoardSaveSuccess",(e,t,a,i)=>{let{action:n,saveToBoard:r,dispatch:l,pin:s,setCompletionPromise:o,shouldShowToast:d,showRepinAnimation:c,viewerUserId:u,urlPinInfo:p}=this.props;l((0,h.fO)());let _=e.resource_response.data,g=this.makeCancelablePromise(new Promise(e=>{this.triggerPubSubs(_);let n=this.state.pinDescription.match(F)||[];n.length>0&&this.props.logContextEvent({event_type:2,element:10273,object_id_str:this.props.pin?.entityId,aux_data:{hashtags:JSON.stringify(n)}});let r=()=>{d&&this.showBoardSavedToast(t,a),this.safeSetState({displaySuccessAnimation:!0,modalTitle:this.props.i18n._('Board created', 'Modal title after creating a new board', 'Modal title after creating a new board'),newPin:_,resolve:e})};i?r():e(_)}));!i&&s?.entityId&&c(s.entityId),o(g),r(t),l((0,j.Br)({boardId:t.id,sectionId:a&&a.id,increment:1})),u&&(l((0,I.JS)({userId:u,increment:1})),l((0,h.fO)())),(a||!t.image_cover_url)&&(t.image_cover_url=s?.imageUrl||p?.imageUrl||s?.imageSpec_236x?.url||"",l((0,j.yT)(t))),a&&l((0,b.U)("BoardSectionResource",{options:{field_set_key:"board_page",section_id:a.id}})),s?.entityId&&l((0,w.Ur)({id:s.entityId,nodeId:s.__id,boardId:t.id,title:t.name??"",url:t.url??"",localPinId:_.id}))}),R(this,"handleSaveToBoard",(e,t,a)=>{let{onToggleModal:i,shouldShowToast:n,mountAfterActionPlacement:r}=this.props;n&&!a&&(this.close(),this.showBoardSavedToast(e,t));let l="secret"===(e.privacy||""),s={board:t?t.id:e.id,state:z.S.LOADING};this.safeSetState({boardSavedTo:s},()=>{this.getPinResource(l,e.id,(t||{}).id).callCreate({showError:!1}).then(n=>{r("Save",{pin_id:this.props.pin?.entityId,is_promoted:this.props.pin?.isPromoted}),this.safeSetState({boardSavedTo:Object.assign(s,{state:z.S.SUCCESS})},()=>this.handleBoardSaveSuccess(n,e,t,a)),i&&!a&&i(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),c.Z.showError(e.message_detail||e.message);let t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),i&&i(!1)})})}),R(this,"handleNewBoardAnimationCompletion",()=>{let{pin:e,showRepinAnimation:t}=this.props;e?.entityId&&t(e.entityId)})}getModalTitle(e,t){if(e)if(t)return this.props.i18n._('Create section', 'modal title for create section pane', 'modal title for create section pane');else return this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board');return t?this.props.i18n._('Choose section', 'modal title for choose section', 'modal title for choose section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board')}componentDidUpdate(e){let{boardWithSection:t,showCreate:a,pin:i,urlPinInfo:n,description:r}=this.props,l={};(i!==e.pin||n!==e.urlPinInfo||r!==e.description)&&(l.pinDescription=i?.description||n?.description||r||""),(a!==e.showCreate||t!==e.boardWithSection)&&(l.modalTitle=this.getModalTitle(a,!!t)),Object.keys(l).length>0&&this.safeSetState(l)}componentWillUnmount(){this.unmounted=!0}render(){let{close:e,dismissModal:t,handleNewBoardAnimationCompletion:a,handleSaveToBoard:i,setModalTitle:n,updateDescription:r}=this,{boardSavedTo:l,displaySuccessAnimation:s,modalTitle:o,newPin:d}=this.state,{color:c}=this.props;return this.props.children({boardSavedTo:l,color:c,dismissModal:t,displaySuccessAnimation:s,handleAbort:e,handleNewBoardAnimationCompletion:a,handleSaveToBoard:i,modalTitle:o,newPin:d,setModalTitle:n,updateDescription:r})}}function Z({pinKey:e,shuffleAssetKey:t,...a}){let{saveToBoard:i}=(0,S.W)(),{logContextEvent:n}=(0,d.u)(),r=(0,k.J)()?.onPinCreate,o=(0,f.ZP)(),c=(0,s.TH)(),h=(0,_.Z)(),p=(0,y.dI)(),b=(0,l.I0)(),{updateHeaderState:v}=(0,x.Z)(),P=(0,l.v9)(({advertiser:e})=>h.isAuth&&e&&e.owner_user_id!==h.id?e.id:void 0),{previous:j}=(0,m.ou)(),w=(0,u.cO)(),I=(0,g.Z)(E,e),C=(0,g.Z)(L,t);return(0,B.jsx)(D,{...a,advertiser_id:P,dispatch:b,i18n:o,location:c,logContextEvent:n,mountAfterActionPlacement:w,onPinCreate:r,pin:I,previousHistory:j,saveToBoard:i,showRepinAnimation:e=>v({type:"showRepinAnimation",payload:e}),shuffleAsset:C,toastManagerContext:p,viewerUserId:h.isAuth?h.id:void 0})}},547496:(e,t,a)=>{a.d(t,{Z:()=>eo});var i,n,r,l,s=a(667294);a(167912);var o=a(20256),d=a(852015),c=a(297934),u=a(78039),h=a(233846),p=a(967312),_=a(665605),g=a(270872),m=a(545007),f=a(219308),b=a(174646),y=a(385750),v=a(785893);let x=({board:e,completeCreateSectionAction:t,height:a,onClose:i,pinImport:n,url:r,width:l})=>{let c=(0,h.ZP)(),{isRTL:u}=(0,b.B)(),p=(0,f.Z)(),_=(0,m.I0)(),[g,x]=(0,s.useState)(""),[S,P]=(0,s.useState)(!1),[k,j]=(0,s.useState)(null);return(0,v.jsx)(d.ZP,{accessibilityModalLabel:c._('Repin modal', 'save.pinToBoard.modal.label', 'Accessibility label on modal'),footer:(0,v.jsx)(o.kC,{children:(0,v.jsx)(o.xu,{marginStart:"auto",children:(0,v.jsx)(o.zx,{color:"red",dataTestId:"create-section-add-button",disabled:S||!g.trim()||!!k,fullWidth:!0,onClick:()=>{e&&(P(!0),_((0,y.Z)({boardId:e.id,name:g.trim(),pinImport:n},c,void 0,p)).then(a=>{t(e,a,!1)}).catch(e=>{j(e.message_detail||e.message)}).finally(()=>{P(!1)}))},size:"lg",text:c._('Add', 'sectionCreateModal.add.button', 'add a new section')})})}),heading:(0,v.jsx)(o.xu,{paddingY:8,children:(0,v.jsxs)(o.kC,{justifyContent:"center",children:[(0,v.jsx)(o.xu,{maxWidth:400,children:(0,v.jsx)(o.X6,{align:"center",size:"600",children:c._('Add section', 'sectionCreateModal.title', 'Title in the add section modal')})}),(0,v.jsx)(o.xu,{left:u,padding:8,position:"absolute",right:!u,top:!0,children:(0,v.jsx)(o.hU,{accessibilityLabel:c._('Close', 'sectionCreateModal.closeButton', 'close section create modal button'),icon:"cancel",iconColor:"darkGray",onClick:i,size:"md"})})]})}),onDismiss:i,size:"sm",children:(0,v.jsx)(o.xu,{padding:8,children:(0,v.jsxs)(o.kC,{children:[(0,v.jsx)(o.zd,{height:a,rounding:4,width:l,children:r&&(0,v.jsx)(o.Ee,{alt:"",fit:"cover",naturalHeight:a??1,naturalWidth:l??1,src:r})}),(0,v.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{width:l?`calc(100% - ${l}px)`:"100%"}},marginStart:8,children:(0,v.jsx)(o.nv,{dataTestId:"create-section-name-input-field",errorMessage:k,id:"sectionEditName",label:c._('Name', 'section.create.label', 'label text for section input'),onChange:e=>{x(e.value),j(null)},placeholder:c._('Like "Lighting"', 'sectionCreateModal.boardSection.name', 'Placeholder for board section name'),size:"lg",type:"text",value:g})})]})})})};var S=a(19963),P=a(801393),k=a(113474),j=a(178592),w=a(538645);let I=void 0;function C(e,t,a,i){return{...e?{pin_id:e}:Object.freeze({}),...t?{username:t}:Object.freeze({}),...a?{advertiser_id:a,filter:"protected"}:Object.freeze({}),field_set_key:"board_picker",limit:I,shortlist_suggestions:2,isDesktop:i}}var A=a(521990),T=a(483863);let B=(void 0!==i||(i=a(375283)).hash&&"76215b7b40cb02e76b77e58c8765d0d1"!==i.hash&&console.error("The definition of 'BoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);class z extends s.Component{constructor(...e){var t,a,i;super(...e),t="getSections",a=e=>{let{boardResource:{data:t}}=this.props;if(!t)return[];let{all_boards:a,boards_shortlist:i}=t,n=(e=>{let t=[],a=[];return e.forEach(e=>{e.name?.match(/^\d/)?a.push(e):t.push(e)}),[...t,...a]})(a);return n.length<=3?[{items:n}]:e.length>=j.Z?[{items:(0,T.j)(n,e)}]:[i.length?{items:i,title:this.props.i18n._('Top choices', ' - ', ' -- ')}:{items:[]},{items:n,title:this.props.i18n._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')}]},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}render(){let{boardResource:{data:e,error:t,isLoaded:a},boardSavedTo:i,isSelectMode:n,onBoardCreate:r,onBoardSelected:l,pin:s}=this.props,o=a&&!!e&&e.all_boards.length<=3;return(0,v.jsx)(A.Z,{boardSavedTo:i,getSections:this.getSections,hasLoadError:!!t,hasLowBoardCount:o,isLoaded:a,isSelectMode:n,onCreate:r,onSelected:l,pinId:s?.entityId})}}function R({pinKey:e,...t}){let a=(0,h.ZP)(),i=(0,c.Z)(),n=(0,w.HG)(),r=(0,u.Z)(B,e),l=(0,m.v9)(({advertiser:e})=>{if(i.isAuth&&e&&e.owner_user_id!==i.id)return e.id}),s=(0,m.v9)(({advertiser:e})=>{if(i.isAuth&&e&&e.owner_user_id!==i.id)return e.owner_user_id}),o=(0,k.Z)({name:"BoardPickerBoardsResource",options:C(r?.entityId,s,l,n)});return(0,v.jsx)(z,{...t,boardResource:o,i18n:a,pin:r})}class F extends s.Component{constructor(...e){var t,a,i;super(...e),t="getSections",a=e=>{let{board:t,i18n:a,sectionsResource:{data:i}}=this.props,n=a._('Board', 'PinSaveButton.RepinPicker.SectionListBoardTitle', 'board title on section picker'),r=a._('Section', 'PinSaveButton.BoardFlyout.SectionListSectionTitle', 'section title on section picker');return e.length>=j.Z?[{items:(0,T.j)([t],e),customProps:{inSectionSelection:!0}},{items:(0,T.j)(i??[],e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0},title:n},{items:i??[],title:r}]},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}render(){let{sectionsResource:{error:e,isLoaded:t},boardSavedTo:a,isSelectMode:i,onSectionCreate:n,onSectionSelected:r,pinId:l}=this.props;return(0,v.jsx)(A.Z,{boardSavedTo:a,createButtonLabel:this.props.i18n._('Add section', 'Button for creating a board section', 'Button for creating a board section'),getSections:this.getSections,hasLoadError:!!e,isLoaded:t,isSelectMode:i,onCreate:n,onSelected:r,pinId:l})}}function E(e){let t=(0,h.ZP)(),a=(0,k.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}});return(0,v.jsx)(F,{...e,i18n:t,sectionsResource:a})}var L=a(69401),D=a(513277),Z=a(847989),K=a(403526),M=a(971518),N=a(257159);function O(e){let t=(0,D.Z)(),{body:a,img:i,onClick:n,selected:r,title:l,username:s,valid:d}=e;return(0,v.jsx)(o.xu,{marginBottom:4,children:(0,v.jsx)(o.iP,{onTap:n,children:(0,v.jsxs)(o.kC,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[i,(0,v.jsxs)(o.xu,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,v.jsx)(o.xu,{marginBottom:1,children:(0,v.jsx)(o.xv,{lineClamp:1,weight:"bold",children:l})}),(0,v.jsx)(o.xv,{lineClamp:1,size:"100",children:s||a})]}),(0,v.jsx)(o.xu,{marginStart:2,children:s?r?(0,v.jsx)(o.JO,{accessibilityLabel:t._('Confirmation an invite will be sent', 'Alt tags on a check box on the board create flow for board invites', 'Alt tags on a check box on the board create flow for board invites'),color:"error",icon:"check-circle",size:32}):(0,v.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,v.jsx)(o.zx,{color:"gray",disabled:!!r||!d,size:"sm",text:r?t._('Sent', 'Sent a board collaborator invite', 'Sent a board collaborator invite'):t._('Invite', 'Add board collaborator invite', 'Add board collaborator invite')})})]})})})}var U=a(827684);function H(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function W(e,t,a){let{id:i}=e;return t===a.findIndex(e=>e.id===i)}class q extends s.Component{constructor(...e){super(...e),H(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),H(this,"isIdSelected",{}),H(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),H(this,"handleCollaboratorClick",e=>{let{id:t,type:a}=e;this.isIdSelected[t]=!this.isIdSelected[t];let{inviteUsers:i,inviteEmails:n}=this.props,{selectedCollaborators:r}=this.state,l=r.concat([e]);this.props.onSelectedCollaboratorsChange({id:t,resource:"email"===a?n:i}),this.setState({selectedCollaborators:l})}),H(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})})}componentDidMount(){let{inviteUsers:e,inviteEmails:t}=this.props;this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(a=>{let{id:i,type:n}=a;return this.isIdSelected[i]=!this.isIdSelected[i],this.props.onSelectedCollaboratorsChange({id:i,resource:"email"===n?t:e}),null})}render(){let{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,a=t||[],i=(""===e?this.state.selectedCollaborators.concat(a).filter(W):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:(0,K.Z)(e)}).concat(a).filter(W)).map(e=>(function(e,t,a,i){if("user_share_suggestion"===e.type||"user"===e.type){let i=(0,v.jsx)(M.qE,{accessibilityLabel:"",name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,v.jsx)(O,{img:i,onClick:()=>a(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){let n,r,{id:l,valid:s}=e,d=(0,v.jsx)(o.xu,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,v.jsx)(o.JO,{accessibilityLabel:i._('Email icon', 'Email icon on board create modal', 'Email icon on board create modal'),color:"default",icon:"envelope",size:20})}),c=(0,N.Z)(i._('Email {{ email }}', ' - ', ' -- '),{email:l});return t?(n=i._('Done!', 'Text that lets the user know we sent the board invite email', 'Text that lets the user know we sent the board invite email'),r=()=>void 0):(n=s?i._('Click to send!', 'Text that lets the user know they can successfully send a board invite email', 'Text that lets the user know they can successfully send a board invite email'):i._('Keep typing!', 'Text that lets a user know the email they are typing is not valid yet', 'Text that lets a user know the email they are typing is not valid yet'),r=()=>s?a(e):void 0),(0,v.jsx)(O,{body:n,img:d,onClick:r,selected:t,title:c,valid:s})}})(e,this.isIdSelected[e.id],this.handleCollaboratorClick,this.props.i18n)).map((e,t)=>(0,v.jsx)("li",{children:e},t));return(0,v.jsxs)(o.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,v.jsx)(o.xu,{paddingX:3,paddingY:2,children:(0,v.jsx)(o.xv,{size:"100",children:this.props.i18n._('Add collaborators (optional)', 'Optional field to add collaborators to a board on board create', 'Optional field to add collaborators to a board on board create')})}),(0,v.jsx)(o.xu,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,v.jsx)(o.xu,{flex:"grow",children:(0,v.jsx)(Z.Z,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,v.jsx)(o.Um,{accessibilityLabel:this.props.i18n._('Search for collaborators by name or email', ' - ', ' -- '),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._('Search by name or email', ' - ', ' -- '),size:"lg",value:e})})})}),(0,v.jsx)(o.xu,{marginBottom:14,overflow:"auto",paddingX:3,children:(0,v.jsx)("ul",{children:i})})]})}}function V(e){let t=(0,D.Z)(),a=(0,k.Z)({name:"ShareSuggestionsResource",noCache:!0}),i=(0,U.zC)(),n=(0,U.DK)();return(0,v.jsx)(q,{...e,i18n:t,inviteEmails:i,inviteUsers:n,shareSuggestionsResource:a})}var $=a(117588),J=a(801684);function G({isOverlayPanelEnabled:e,onCancel:t,onCreate:a,onInvite:i,prefilledName:n,preselectedCollaborators:r,showTitle:l}){let d=(0,h.ZP)(),{isRTL:c}=(0,b.B)(),{handleCreate:u,handleChangeName:p,handleChangePrivacy:_,isAdAccountOwner:g,state:{createBoardError:m,inputName:f,nameValidatorErrors:y,privacy:x,saving:S}}=(0,J.Z)({onCreate:a,prefilledName:n}),P=0===y.length,k=x===L.ZP.BoardPrivacy.SECRET,j=(0,v.jsxs)(s.Fragment,{children:[(0,v.jsx)(o.kC,{children:(0,v.jsx)(o.zx,{onClick:t,text:d._('Cancel', 'cancel board create', 'cancel board create')})}),(0,v.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"end",children:[!!m&&(0,v.jsx)(o.xu,{paddingX:2,children:(0,v.jsx)(o.xv,{align:"center",color:"error",size:"200",weight:"bold",children:m})}),(0,v.jsx)($.Z,{disabled:!f.trim()||!P||!!m||S,submitting:S,text:d._('Create', 'create a new board', 'create a new board')})]})]});return(0,v.jsx)(o.xu,{color:"default",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,v.jsx)("form",{onSubmit:e=>{e.preventDefault(),u()},style:{height:"100%"},children:(0,v.jsxs)(o.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[l&&(0,v.jsx)(o.xu,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,v.jsx)(o.X6,{size:"400",children:d._('Create board', ' - ', ' -- ')})}),(0,v.jsxs)(o.xu,{padding:3,children:[(0,v.jsx)(o.xu,{marginBottom:2,children:(0,v.jsx)(o.__,{htmlFor:"boardEditName",children:(0,v.jsx)(o.xv,{size:"100",children:d._('Name', ' - ', ' -- ')})})}),(0,v.jsx)(o.xu,{children:(0,v.jsx)(o.nv,{errorMessage:y.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>p(e),placeholder:d._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:f})})]}),g&&(0,v.jsxs)(s.Fragment,{children:[(0,v.jsxs)(o.xu,{padding:3,children:[(0,v.jsx)(o.xu,{marginBottom:2,children:(0,v.jsx)(o.__,{htmlFor:"secret",children:(0,v.jsx)(o.xv,{size:"100",children:d._('Secret', 'secret board', 'secret board')})})}),(0,v.jsx)(o.xu,{children:(0,v.jsx)(o.rs,{id:"secret",onChange:_,switched:k})})]}),(0,v.jsx)(o.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start",overflow:"hidden",children:(0,v.jsx)(o.xu,{width:"100%",children:(0,v.jsx)(V,{onSelectedCollaboratorsChange:i,preselectedCollaborators:r})})})]}),!g&&(0,v.jsx)(s.Fragment,{children:(0,v.jsxs)(o.xu,{padding:3,children:[(0,v.jsx)(o.xu,{marginBottom:2,children:(0,v.jsx)(o.__,{htmlFor:"protected",children:(0,v.jsx)(o.xv,{size:"100",children:d._('Protected board (not listed on user\'s profile)', 'protected board', 'protected board')})})}),(0,v.jsx)(o.xu,{children:(0,v.jsx)(o.rs,{disabled:!0,id:"protected",onChange:()=>void 0,switched:!0})})]})}),e?(0,v.jsx)(o.xu,{bottom:!0,color:"default","data-test-id":"create-board-footer-overlay",display:"flex",justifyContent:"between",left:c,position:"absolute",right:!c,width:672,children:j}):(0,v.jsx)(o.xu,{borderStyle:"shadow",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},"data-test-id":"create-board-footer-default",display:"flex",justifyContent:"between",left:c,paddingX:4,paddingY:2,position:"absolute",right:!c,width:720,children:j})]})})})}var Y=a(594457);function X(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let Q=(void 0!==n||(n=a(158727)).hash&&"56f620fbd63abf8f7cb32f9a378198f8"!==n.hash&&console.error("The definition of 'BoardsPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class ee extends s.Component{constructor(...e){super(...e),X(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),X(this,"close",()=>{let{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:a}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):a()}),X(this,"sendInvites",e=>{let{inviteQueue:t}=this.state;Object.keys(t).forEach(a=>{t[a].resource(e.id??"",[a])})}),X(this,"handleInvite",e=>{let{inviteQueue:t}=this.state;if(t[e.id]){let a={...t};delete a[e.id],this.setState({inviteQueue:a})}else{let a={...t,[e.id]:e};this.setState({inviteQueue:a})}}),X(this,"handleBoardCreate",e=>{let{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),X(this,"handleBoardSave",(e,t)=>{let{selectedSectionBoard:a}=this.state,{onBoardSave:i,invalidatePinBetterSaveResource:n,invalidateResource:r}=this.props,l="board_section"===e.type;if(r(),n(),a&&("boardsection"===e.type||l))return i(a,e,t);let{section_count:s=0}=e;!a&&"number"==typeof s&&s>0?this.setState({selectedSectionBoard:e},this.manageModalTitle):(this.sendInvites(e),i(e,void 0,t))}),X(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle),this.props.logContextEvent({event_type:101,component:e?13105:13025,element:e?10306:249})}),X(this,"manageModalTitle",()=>{let{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:a}=this.state;e&&e(a&&t?this.props.i18n._('Add section', 'Repin title for making a board section', 'Repin title for making a board section'):a&&!t?this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board'):t&&!a?this.props.i18n._('Choose section', 'Repin title for choosing a board section', 'Repin title for choosing a board section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board'))})}render(){let{boardSavedTo:e,isOverlayPanelEnabled:t,isRepin:a,isSelectMode:i,pin:n,preselectedCollaborators:r,setModalTitle:l,suggestedBoardTitle:s}=this.props,{newName:d,selectedSectionBoard:c,showCreate:u}=this.state,h=!!c,p=!l;return(0,v.jsxs)(o.xu,{display:"flex",position:"relative",width:"100%",children:[!u&&(0,v.jsx)(o.xu,{direction:"column",display:"flex",marginTop:4,width:"100%",children:c?(0,v.jsx)(E,{board:c,boardSavedTo:e,isSelectMode:i,onSectionCreate:this.handleCreate(h),onSectionSelected:this.handleBoardSave}):(0,v.jsx)(R,{boardSavedTo:e,isSelectMode:i,onBoardCreate:this.handleCreate(h),onBoardSelected:this.handleBoardSave,pinKey:n})}),u&&!c&&(0,v.jsx)(G,{isOverlayPanelEnabled:t,onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,prefilledName:d||s,preselectedCollaborators:r,showTitle:p}),u&&c&&(0,v.jsx)(Y.Z,{board:c,completeCreateSectionAction:this.handleBoardSave,initialName:d,isRepin:a,onClearModal:this.close,showTitle:p})]})}}function et({pinKey:e,...t}){let{logContextEvent:a}=(0,S.u)(),i=(0,h.ZP)(),n=(0,u.Z)(Q,e),r=(0,m.I0)();return(0,v.jsx)(ee,{...t,i18n:i,invalidatePinBetterSaveResource:()=>{r((0,P.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},invalidateResource:()=>{r((0,P.jB)("BoardPickerBoardsResource",C(n?.entityId)))},logContextEvent:a,pin:n})}var ea=a(350739),ei=a(630929);function en(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let er=(void 0!==r||(r=a(113490)).hash&&"616d5be8fea6092b51f23b548a1a5dca"!==r.hash&&console.error("The definition of 'PinToBoard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),el=(void 0!==l||(l=a(905018)).hash&&"4435ca5e135b834ea8a6425f68eb2f7a"!==l.hash&&console.error("The definition of 'PinToBoard_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);class es extends s.PureComponent{constructor(...e){super(...e),en(this,"pinImageRef",(0,s.createRef)()),en(this,"handleSavePinToBoard",(e,t,a)=>{let{handleSaveToBoard:i}=this.props;i(e,t,a)}),en(this,"close",()=>{let{handleAbort:e}=this.props;e()}),en(this,"dismissModal",()=>{let{dismissModal:e}=this.props;e&&e()})}render(){let{boardSavedTo:e,boardWithSection:t,color:a,displaySuccessAnimation:i,handleNewBoardAnimationCompletion:n,isInModal:r,newPin:l,pin:c,preselectedCollaborators:u,onBoardCreated:h,sensitiveContentNotice:m,setModalTitle:f,showCreate:b,shouldRenderContent:y,suggestedBoardTitle:S,updateDescription:P,urlPinInfo:k,shuffleAsset:j}=this.props,w=k?.description||k?.link||k?.imageUrl;if(!c&&!w||!y)return null;if(b&&t)return(0,v.jsx)(x,{board:t,completeCreateSectionAction:this.handleSavePinToBoard,height:c?.imageSpec_236x?.height??0,onClose:this.close,url:c?.imageSpec_236x?.url??k?.imageUrl??"",width:c?.imageSpec_236x?.width??0});let I=null;l&&l.board&&(I=l.board.name);let C=m&&m.title||this.props.modalTitle,{checkExperiment:A}=(0,p.r)(),T=r&&A("web_board_create_overlay_panel").anyEnabled,B=m?(0,v.jsx)(_.Z,{inModal:!0,notices:[m]}):(0,v.jsx)(o.kC,{alignItems:"stretch",dataTestId:"pin-to-board-content",height:T?"100%":"calc(90vh - 97px)",justifyContent:"center",maxHeight:T?void 0:"703px",width:"100%",children:(0,v.jsxs)(s.Fragment,{children:[(0,v.jsxs)(o.xu,{color:"default",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,v.jsx)(o.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:(0,v.jsx)(o.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,v.jsx)(ea.Z,{color:a,pinImageRef:this.pinImageRef,pinKey:c,shuffleAssetKey:j,updateDescription:P,urlPinInfo:k})})}),(0,v.jsx)(o.kC,{alignItems:"stretch",width:"60%",children:(0,v.jsx)(et,{boardSavedTo:e,boardWithSection:t,isOverlayPanelEnabled:T,isRepin:!0,onBoardCreated:h,onBoardSave:this.handleSavePinToBoard,onClose:this.close,pinKey:c,preselectedCollaborators:u,setModalTitle:r?f:void 0,showCreate:b,suggestedBoardTitle:S})})]}),i&&(0,v.jsx)(g.Z,{onDismiss:()=>{n(),this.dismissModal()},pinImageRef:this.pinImageRef,pinKey:c,selectedBoardName:I,shuffleAssetKey:j})]})});if(!r)return B;let z=C||this.props.i18n._('Repin modal', 'save.pin-to-board.PinToBoard.PinToBoard', 'Accessibility label on modal');return T?(0,v.jsx)(o.mh,{zIndex:new o.H3([ei.BO]),children:(0,v.jsx)(o.To,{accessibilityLabel:z,heading:C||void 0,onDismiss:this.close,size:"md",children:B})}):(0,v.jsx)(d.ZP,{accessibilityModalLabel:z,heading:C,onDismiss:this.close,size:"md",children:B})}}en(es,"defaultProps",{pwtAuxData:{}});let eo=function({pinKey:e,shuffleAssetKey:t,...a}){let i=(0,h.ZP)(),n=(0,c.Z)(),r=(0,u.Z)(er,e),l=(0,u.Z)(el,t);return(0,v.jsx)(es,{...a,i18n:i,pin:r,shuffleAsset:l,viewer:n})}},143906:(e,t,a)=>{a.d(t,{A:()=>i,S:()=>n});let i=4e3,n={LOADING:"loading",SUCCESS:"success"}},801684:(e,t,a)=>{a.d(t,{Z:()=>_});var i=a(667294),n=a(545007),r=a(69401),l=a(18644),s=a(297934),o=a(233846),d=a(51340),c=a(801393),u=a(331935),h=a(825839),p=a(782803);function _({onCreate:e,prefilledName:t}){let a=(0,o.ZP)(),_=(0,n.v9)(({advertiser:e})=>e),g=(0,n.I0)(),m=(0,s.Z)(),f=!_||m.isAuth&&_.owner_user_id===m.id,b=_&&_.id,y=(0,p.Z)(),[v,x]=(0,i.useState)({createBoardError:null,inputName:t||"",nameValidatorErrors:[],privacy:f?r.ZP.BoardPrivacy.PUBLIC:r.ZP.BoardPrivacy.PROTECTED,saving:!1}),S=()=>{let{inputName:t,privacy:i}=v;x({...v,saving:!0,createBoardError:null}),y({boardCreateOptions:{name:t,privacy:i,...!f&&b?{advertiser_id:b}:Object.freeze({}),aux_data:{source:"board_picker"}}}).then(t=>{x({...v,saving:!1}),e(t)}).catch(e=>{let t=a._('Uh oh! Something went wrong.', ' - ', ' -- ');if("string"==typeof e)t=e;else{let a=(0,l.Z)(e,"message");if(a){let i=(0,l.Z)(e,"message_detail");t=i?`${a} ${i}`:a}}x({...v,saving:!1,createBoardError:t})}),g((0,c.jB)("BoardsResource",(0,h.Z)(m.isAuth?m.username:"",i===r.ZP.BoardPrivacy.SECRET)))};return{handleChangeName:(e,t)=>{x({...v,inputName:e,nameValidatorErrors:(0,u.FU)([(0,u.aH)({message:a._('Don\'t forget to name your board!', ' - ', ' -- ')}),(0,u.Gy)({max:r.ZP.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,d.nk)(a._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a user input is too long', 'Validation error when a user input is too long'),{maxLength:r.ZP.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],e),createBoardError:null}),t&&S()},handleChangePrivacy:()=>{x({...v,privacy:v.privacy===r.ZP.BoardPrivacy.SECRET?r.ZP.BoardPrivacy.PUBLIC:r.ZP.BoardPrivacy.SECRET})},handleCreate:S,isAdAccountOwner:f,state:v}}},782803:(e,t,a)=>{a.d(t,{Z:()=>c});var i=a(545007),n=a(782677),r=a(578373),l=a(778622),s=a(43535),o=a(987775),d=a(801393);function c(){let e=(0,i.I0)(),t=(0,i.v9)(e=>e.resources);return async function({boardCreateOptions:a,deprecatedSchemaForNormalization:i}){let c=await r.Z.create("BoardResource",a).callCreate(),u=c.resource_response.data,h=i?(0,n.Fv)(u,i):void 0;e((0,d.XM)("BoardResource",a,c,h)),e((0,l.fO)({event_type:20})),u.owner?.id&&e((0,o.b)("UserResource",{options:{user_id:u.owner.id,field_set_key:"save_behavior"}}));let p=t.BoardsResource||{},_=t.BoardsFeedResource||{};return Object.keys(p).forEach(t=>{(0,s.k)(t).username===u.owner?.username&&e((0,d.jB)("BoardsResource",t))}),Object.keys(_).forEach(t=>{(0,s.k)(t).username===u.owner?.username&&e((0,d.jB)("BoardsFeedResource",t))}),u}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/500-f774c2f69a4ebe16.mjs.map