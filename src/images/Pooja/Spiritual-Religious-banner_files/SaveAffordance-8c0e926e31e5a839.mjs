"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[47442],{792862:(e,n,t)=>{t.r(n),t.d(n,{default:()=>T});var o=t(667294),a=t(545007),i=t(20256),r=t(401587),l=t(985459),d=t(547504),s=t(95460),c=t(896798),u=t(233846),p=t(298568);function v({constraint:e}){let n=(0,p.A)(),t=n?.getId();return(0,o.useEffect)(()=>{n&&n.markConstraintComplete(e)},[t,e]),null}var m=t(349057),h=t(181710),S=t(943369),x=t(677316),P=t(755090),k=t(961238),f=t(356204),_=t(739951),C=t(506536),b=t(757653),w=t(785893);let y=(0,b.Z)(()=>t.e(43473).then(t.bind(t,16736)),void 0,e=>16736,"PinSaveButtonCommon",e=>[43473]),B=(0,o.lazy)(async()=>({default:(await Promise.all([t.e(69965),t.e(50714),t.e(22538)]).then(t.bind(t,797043))).QuickSaveButtonWithExperienceAnchor})),T=({boardCount:e=0,clientTrackingParams:n,onBoardSelectionFlyoutChange:t,onClickCallback:b,pin:T,showEnabledSaveBehavior:Z,showRepinOnInitialRender:g,variant:j,viewParameter:A,viewType:I,saveToBoardFromPostDownloadUpsell:D,setSaveToBoardFromPostDownloadUpsell:Q})=>{let U=(0,p.A)(),{experience:E}=(0,c.Ow)(1000310),{experience:F}=(0,c.Ow)(12),M=(0,x.Z)(),R=(0,a.I0)(),K=(0,u.ZP)(),O=(0,o.useRef)(!1),{pins:N,clear:z}=(0,f.Z)(),J=(0,S.M0)().getItem(d.M8)||"",W=J?J===T.id:!!N&&N.length>0&&N[N.length-1].id===T.id;(0,P.Z)(()=>{O.current||2!==N.length&&(1!==N.length||W)||(O.current=!0,(2===N.length&&!J&&W?[N[0]]:N).forEach(({id:e,nodeId:n})=>{(0,l.Z)({description:"",entityId:e,link:"",promotedIsRemovable:void 0,title:""},K).then(t=>{let{id:o,url:a,name:i}=t;R((0,_.d)({boardId:o,url:a,title:i||"",pinId:e||"",nodeId:n}))})}),W||z())});let q=()=>{(0,S.M0)().removeItem(d.M8),z(),M({action:"trigger",item:"unauth-save-button-quicksave"}),R((0,C.Z)(!0)),R((0,_.d)({boardId:"",url:"",title:"Profile",pinId:T.id,nodeId:T?.node_id})),R((0,_.X)(T))},H=()=>{(0,m.Nx)("button"),U&&U.markConstraintComplete("button")};if(T?.pinner?.blocked_by_me||T?.promoted_is_removable)return(0,m.Nx)("button"),(0,w.jsx)(v,{constraint:"button"});if(E&&502450===E.experience_id)return(0,w.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_QuickSaveButton",children:(0,w.jsx)(h.Z,{children:(0,w.jsx)(r.Z,{id:"QuickSaveButtonWithExperienceAnchor",children:(0,w.jsx)(B,{autoQuicksaveCallback:q,clientTrackingParams:n,experience:E,onClickCallback:b,onMount:H,pinKey:{type:"deprecated",data:T},saveToBoardFromPostDownloadUpsell:D,setSaveToBoardFromPostDownloadUpsell:Q,shouldAutoQuicksave:W,showEnabledSaveBehavior:Z,viewParameter:A})})})});let L=!T.content_sensitivity?.is_sensitive_content&&void 0!==e,V=[501041],X=F&&501041===F.experience_id&&F.display_data.has_tooltip?e=>(0,w.jsx)(c.Qp,{anchor:e,experienceIds:V,idealDirection:"down",placementId:12,positionRelativeToAnchor:!0,showCaret:!0}):e=>(0,w.jsx)(c.N,{anchors:{3010:e},idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0});return L?(0,w.jsx)(i.xu,{children:(0,w.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinBetterSave",children:(0,w.jsx)(r.Z,{id:"PinBetterSave",children:(0,w.jsx)(k.default,{autoQuicksaveCallback:q,clientTrackingParams:n,onClickCallback:b,onMount:H,onToggleFlyout:t,pinKey:{type:"deprecated",data:T},renderPinSaveTooltip:X,saveToBoardFromPostDownloadUpsell:D,setSaveToBoardFromPostDownloadUpsell:Q,shouldAutoQuicksave:W,variant:j,viewParameter:A,viewType:I})})})}):(0,w.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinSaveButton",children:(0,w.jsx)(h.Z,{children:(0,w.jsx)(r.Z,{id:"PinSaveButton",children:(0,w.jsx)(y,{clientTrackingParams:n,isCloseupPin:!0,onClickCallback:b,onMount:H,pinKey:{type:"deprecated",data:T},renderPinSaveTooltip:X,saveToBoardFromPostDownloadUpsell:D,setSaveToBoardFromPostDownloadUpsell:Q,showRepinOnInitialRender:g})})})})}},506536:(e,n,t)=>{t.d(n,{Z:()=>o});function o(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/SaveAffordance-8c0e926e31e5a839.mjs.map